# ![logo](https://i.imgur.com/zqJELkl.png)

<p align="center">
 <img src="https://img.shields.io/badge/License-MIT-blue.svg">
 <img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103">
 <img src="http://ForTheBadge.com/images/badges/built-with-love.svg">
 <img src="https://img.shields.io/badge/badges-awesome-green.svg">
 <img src="https://img.shields.io/badge/Stay-Safe-red?logo=data:image/svg%2bxml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTEwIDUxMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCA1MTAgNTEwIiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnPjxnPjxwYXRoIGQ9Im0xNzQuNjEgMzAwYy0yMC41OCAwLTQwLjU2IDYuOTUtNTYuNjkgMTkuNzJsLTExMC4wOSA4NS43OTd2MTA0LjQ4M2g1My41MjlsNzYuNDcxLTY1aDEyNi44MnYtMTQ1eiIgZmlsbD0iI2ZmZGRjZSIvPjwvZz48cGF0aCBkPSJtNTAyLjE3IDI4NC43MmMwIDguOTUtMy42IDE3Ljg5LTEwLjc4IDI0LjQ2bC0xNDguNTYgMTM1LjgyaC03OC4xOHYtODVoNjguMThsMTE0LjM0LTEwMC4yMWMxMi44Mi0xMS4yMyAzMi4wNi0xMC45MiA0NC41LjczIDcgNi41NSAxMC41IDE1LjM4IDEwLjUgMjQuMnoiIGZpbGw9IiNmZmNjYmQiLz48cGF0aCBkPSJtMzMyLjgzIDM0OS42M3YxMC4zN2gtNjguMTh2LTYwaDE4LjU1YzI3LjQxIDAgNDkuNjMgMjIuMjIgNDkuNjMgNDkuNjN6IiBmaWxsPSIjZmZjY2JkIi8+PHBhdGggZD0ibTM5OS44IDc3LjN2OC4wMWMwIDIwLjY1LTguMDQgNDAuMDctMjIuNjQgNTQuNjdsLTExMi41MSAxMTIuNTF2LTIyNi42NmwzLjE4LTMuMTljMTQuNi0xNC42IDM0LjAyLTIyLjY0IDU0LjY3LTIyLjY0IDQyLjYyIDAgNzcuMyAzNC42OCA3Ny4zIDc3LjN6IiBmaWxsPSIjZDAwMDUwIi8+PHBhdGggZD0ibTI2NC42NSAyNS44M3YyMjYuNjZsLTExMi41MS0xMTIuNTFjLTE0LjYtMTQuNi0yMi42NC0zNC4wMi0yMi42NC01NC42N3YtOC4wMWMwLTQyLjYyIDM0LjY4LTc3LjMgNzcuMy03Ny4zIDIwLjY1IDAgNDAuMDYgOC4wNCA1NC42NiAyMi42NHoiIGZpbGw9IiNmZjRhNGEiLz48cGF0aCBkPSJtMjEyLjgzIDM2MC4xMnYzMGg1MS44MnYtMzB6IiBmaWxsPSIjZmZjY2JkIi8+PHBhdGggZD0ibTI2NC42NSAzNjAuMTJ2MzBoMzYuMTRsMzIuMDQtMzB6IiBmaWxsPSIjZmZiZGE5Ii8+PC9nPjwvc3ZnPg==">

</p>
 <p align="center">
     <a href="https://img.shields.io/github/stars/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=FFD700&style=for-the-badge" alt="GitHub Repo stars">
         <img src="https://img.shields.io/github/stars/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=FFD700&style=for-the-badge"></a>
     <a href="https://img.shields.io/github/forks/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=00a671&style=for-the-badge" alt="GitHub forks">
         <img src="https://img.shields.io/github/forks/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=00a671&style=for-the-badge"></a>
     <a href="https://img.shields.io/github/watchers/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=9700b2&style=for-the-badge" alt="GitHub watchers">
         <img src="https://img.shields.io/github/watchers/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=9700b2&style=for-the-badge"></a>
</p>

<h2><p align="center">
<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.zh-CN.md"><b>ğŸ‡¨ğŸ‡³</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.es.md"><b>ğŸ‡ªğŸ‡¸</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.ru.md"><b>ğŸ‡·ğŸ‡º</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.hi.md"><b>ğŸ‡®ğŸ‡³</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.fr.md"><b>ğŸ‡«ğŸ‡·</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.it.md"><b>ğŸ‡®ğŸ‡¹</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.de.md"><b>ğŸ‡©ğŸ‡ª</b></a>&nbsp;<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/lang/README.ar.md"><b>ğŸ‡¦ğŸ‡ª</b></a></h2>

<h2 align="center"><img src="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/assets/images/awcu.gif" width= "700"></h2>
 
## Features
 
#### _<a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md"><b>AdGuard Home</b></a>_ : Block ads on all your devices( <a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md#how-does-adguard-home-compare-to-pi-hole"><b>_compared to Pi-Hole_</b></a> )
#### _<a href="https://www.wireguard.com/"><b>WireGuard</b></a>_ : VPN server at home accessible from any outside network(IPv4 & IPv6)
#### _<a href="https://www.nlnetlabs.nl/projects/unbound/about/"><b>Unbound</b></a> with <a href="https://dnsprivacy.org/dns_privacy_daemon_-_stubby/about_stubby/"><b>Stubby</b></a>_ : A validating, recursive, caching DNS resolver
#### _<a href="https://www.cloudflare.com/learning/what-is-cloudflare/"><b>Cloudflare</b></a>_ : Better performance & security when browsing websites(DoT & DoH)
 
<p align="right">
<i>All software are free, open-source and&nbsp;self-hosted&nbsp;</i></br><a href="https://git.io/About"><b>About</b></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

* * *

<h3 align="left">DNS query speed with <a href="https://docs.oracle.com/en-us/iaas/Content/DNS/Tasks/testingdnsusingdig.htm"><b>BIND'S dig Tool </b></a> ğŸ§ª</h1>

<b>google.com çš„ç»“æœï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼š</b>

-   AdGuard é»˜è®¤ DNS è§£æå™¨ -`60-70 msec`
-   å…¬å…± Cloudflare/Quad9/Google DNS è§£æå™¨ -`50-70 msec`
-   æ­¤è®¾ç½®/é…ç½® -`5-10 msec`

<details><summary><b>PreviewğŸ¥<img src="https://media.giphy.com/media/WT5h7PgVSScLLKtMaS/giphy.gif" width=50px height=40px></b></summary>
<p>

AdGuard é»˜è®¤ DNS<b><i>å¯¹æ¯”</i></b>è¿™ä¸ªè®¾ç½®â­ï¼š

[HTTPS://user-images.GitHub user content.com/18756975/150230438-ä¸767å“¦86å‘-4å“¦18-4791-ä¸5ä»½é¢-0813615å•Š37å•Š3.é—¨ç¥¨4](https://user-images.githubusercontent.com/18756975/150230438-b767e86f-4e18-4791-b5fe-0813615a37a3.mp4)

å…¬å…± Cloudflare/Quad9/Google DNS è§£æå™¨ï¼š

[HTTPS://user-images.GitHub user content.com/18756975/150319049-3çš„8ACD C9-624å‘-4ä¸60-8å“¦å“¦2-ä¸80227522252.é—¨ç¥¨4](https://user-images.githubusercontent.com/18756975/150319049-3d8acdc9-624f-4b60-8ee2-b80227522252.mp4)

</p>
 </details>

* * *

<h4><p align="center">
Last Checkedâ° : 17 April 2022</h2>

<div align="center">

| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â é¡¹ç›®Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  | Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â åœ°ä½Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  |
| :--------------------------------------------------------: | :----------------------------------------------------: |
|                         AdGuard ä¸»é¡µ                         |                            âœ…                           |
|                             æœªç»‘å®š                            |                            âœ…                           |
|                         Cloudflare                         |                            âœ…                           |
|                             ç²—çŸ­                             |                            âœ…                           |
|                             çº¿å«                             |                            âœ…                           |

</div>
<div>
 
#
# Table of contents
 
 - [Requirements](#requirements)
 - [Install Raspberry Pi OS](#install-raspberry-pi-os-) <img src="https://www.vectorlogo.zone/logos/raspberrypi/raspberrypi-icon.svg" width=20px height=20px>
   - [Access Pi OS with SSH](#access-pi-os-with-ssh)
 - [Install AdGuard Home](#install-adguard-home-) <img src="https://www.vectorlogo.zone/logos/adguard/adguard-icon.svg" width=20px height=20px>
   - [Set up your devices to work with Adguard](#set-up-your-devices-to-work-with-adguard)
   - [Setting up AdGuard blocklist](#setting-up-adguard-blocklist)
     - [Add/Remove multiple URLs](#addremove-multiple-urls)
 - [Install Unbound](#install-unbound-) <img src="https://www.privacytools.io/img/apps/unbound.svg" width=20px height=20px>
 - [Install Cloudflare](#install-cloudflare-) <img src="https://www.vectorlogo.zone/logos/cloudflare/cloudflare-icon.svg" width=20px height=20px>
   - [Setup for Cloudflared (DoH)](#setup-for-cloudflared-doh)
   - [Configure Cloudflare (DoT) on Unbound](#configure-cloudflare-dot-on-unbound)
     - [Configure Stubby for Unbound](#configure-stubby-for-unbound)
   - [Configure AdGuard with Cloudflare (DoH&DoT)](#configure-adguard-with-cloudflaredohdot)
 - [Install WireGuard](#install-wireguard-) <img src="https://www.vectorlogo.zone/logos/wireguard/wireguard-icon.svg" width=20px height=20px>
   or <a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/OpenVPN-Setup.md">OpenVPN(slower)</a> <img src="https://i.imgur.com/Agstbe5.png" width=20px height=20px>
   - [Connecting VPN to Android/IOS Phone](#connecting-vpn-to-androidios-phone)
   - [Connecting VPN to Windows](#connecting-vpn-to-windows)
   - [Configure Wireguard with AdGuard/Unbound/Cloudflare](#configure-wireguard-with-adguardunboundcloudflare)
     - [Limit traffic](#limit-traffic)
     - [IPv6](#ipv6)
     - [Disable all IPv6](#disable-all-ipv6)
 - [Test Vpn](#test-vpn) <img src="https://i.imgur.com/6Yf8Zra.png" width=20px height=20px>
 - [Auto update Pi](#auto-update-pi-)
 - [Install Log2ram](#install-log2ram-)
 - [Turn Off Pi LEDs](#turn-off-pi-led-lights-)
 - [Secure your Raspberry Pi](#secure-your-raspberry-pi-)
 - [Repository Resources](#repository-resources)
 - [F.A.Q](#faq)

# 

# è¦æ±‚

æœ¬æ•™ç¨‹åŸºäº Raspberry Piï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½• Linux<a href="https://github.com/thibmaek/awesome-raspberry-pi#os-images"><b>æ“ä½œç³»ç»Ÿ</b></a><i>ï¼ˆå°‘é‡ï¼‰</i>ï¼Œä»»ä½•ç¡¬ä»¶æˆ–<a href="https://www.google.com/search?q=What+is+a+VPS+used+for%3F&client=firefox-b-d&biw=1280&bih=582&sxsrf=APq-WBu-yng0bW9IWwNKsQhD6h1ZmRGncw%3A1650151372793&ei=zE9bYpL1L_OOwbkPgZ6DGA&ved=0ahUKEwiSi5rz3Jn3AhVzRzABHQHPAAMQ4dUDCA0&uact=5&oq=What+is+a+VPS+used+for%3F&gs_lcp=Cgdnd3Mtd2l6EAMyBAgAEA0yBAgAEA0yBAgAEA0yBAgAEA0yBggAEA0QHjIGCAAQFhAeMgYIABAWEB4yCAgAEAgQDRAeMggIABAIEA0QHjIICAAQCBANEB46BwgAEEcQsANKBAhBGABKBAhGGABQ8AFY8AFg_ANoAXABeACAAXCIAXCSAQMwLjGYAQCgAQKgAQHIAQjAAQE&sclient=gws-wiz"><b>è™šæ‹Ÿä¸»æœº</b></a>.</br>ï¼ˆRaspberry Pi OS æœ€ç®€å•ï¼Œæ¨èç»™ Pi æˆ–æ›´æœ‰ç»éªŒçš„ç”¨æˆ·ï¼Œ<b>é¥®é£Ÿæ´¾</b>æ“ä½œç³»ç»Ÿä¹Ÿæ¨èï¼‰

-   Raspberry Pi 3 æˆ– 4 ç‰ˆæœ¬
-   æ”¯æŒç«¯å£è½¬å‘çš„è·¯ç”±å™¨ï¼ˆå¤§å¤šæ•°å¯ä»¥ï¼‰
-   MicroSD USB è¯»å¡å™¨
-   MicroSD å¡ï¼ˆ8GB æˆ–æ›´å¤§ï¼Œè‡³å°‘ Class 4ï¼‰
-   ä»¥å¤ªç½‘ç”µç¼†
-   ï¼ˆå¦‚æœä½¿ç”¨æ˜¾ç¤ºå™¨ï¼Œåˆ™å¯é€‰ï¼‰MicroHDMI-(RPi 4) æˆ– HDMI-(RPi 3)

# 

<h1 align="center"><b><i>Install Raspberry Pi OS</b></i> </h1>

Raspberry Pi OS æœ‰æ¡Œé¢ç‰ˆå’Œç²¾ç®€ç‰ˆï¼ˆä½¿ç”¨ç²¾ç®€ç‰ˆ<a href="https://www.google.com/search?q=What+is+a+headless+operating+system%3F&client=firefox-b-d&sxsrf=APq-WBvlqMZasn_klYxS5HZmhKQlduKYuQ%3A1650123816301&ei=KORaYtz7EYOdwbkP74G16AE&ved=0ahUKEwjcr5-f9pj3AhWDTjABHe9ADR0Q4dUDCA0&uact=5&oq=What+is+a+headless+operating+system%3F&gs_lcp=Cgdnd3Mtd2l6EAMyCAghEBYQHRAeOgcIABBHELADSgQIQRgASgQIRhgAUMEBWMEBYNAEaAFwAXgAgAFqiAFqkgEDMC4xmAEAoAECoAEByAEIwAEB&sclient=gws-wiz"><b>æ— å¤´</b></a>æ¨¡å¼ï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ˜¾ç¤ºå™¨/é”®ç›˜/é¼ æ ‡è®¿é—® Raspberry Pi æˆ–é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿æ¥<a href="https://www.google.com/search?q=linux+ssh+&client=firefox-b-d&sxsrf=APq-WBve72uwEMMqUAe77nZoaygcx-ROMg%3A1650123667623&ei=k-NaYtbfJbmvwbkPpf6nqAQ&ved=0ahUKEwiW9azY9Zj3AhW5VzABHSX_CUUQ4dUDCA0&uact=5&oq=linux+ssh+&gs_lcp=Cgdnd3Mtd2l6EAMyBAgjECcyBQgAEIAEMgUIABCRAjIFCAAQkQIyBQgAEIAEMgUIABCABDIFCAAQkQIyBQgAEIAEMgUIABCABDIFCAAQgAQ6BwgAEEcQsANKBAhBGABKBAhGGABQuAFY0AJg1AZoAXABeACAAXaIAeIBkgEDMC4ymAEAoAEByAEIwAEB&sclient=gws-wiz"><b>SSH</b></a>ä»ä¸€ä¸ªç»ˆç«¯ã€‚

å®‰è£… balenEtcher å¹¶ä¸‹è½½ Pi æ˜ åƒä»¥å†™å…¥ microSD å¡ã€‚

-   ä¸‹è½½æ ‘è“æ´¾æ“ä½œç³»ç»Ÿï¼š[HTTPS://å‘œå‘œå‘œ.raspberryçš®.org/software/operating-systems/](https://www.raspberrypi.org/software/operating-systems/)

-   ä¸‹è½½balenaEtcherï¼š[HTTPS://å‘œå‘œå‘œ.æ‹”äº†é‚£.IO/etcher/](https://www.balena.io/etcher/)

åœ¨ä½ æ‹¥æœ‰ä¹‹å`Etcher`å®‰è£…å’Œ`Raspberry Pi OS`ä¸‹è½½æ–‡ä»¶åï¼Œæ‚¨ç°åœ¨å¯ä»¥å°†å¸¦æœ‰ microSD USB è¯»å¡å™¨çš„ SD å¡æ’å…¥è®¡ç®—æœºã€‚

-   å¯åŠ¨ Etcher å¹¶é€‰æ‹©æ‚¨ä¸‹è½½çš„ Raspberry Pi OS æ˜ åƒï¼Œé€‰æ‹©æ‚¨çš„ microSD å¡å¹¶å•å‡»`Flash`.

åˆ·æœºå®Œæˆåï¼Œåœ¨â€œè¿™å°ç”µè„‘â€ä¸­æŸ¥æ‰¾ç£ç›˜åç§°â€œboot or USB driveâ€ï¼ˆå¦‚æœæ²¡æœ‰çœ‹åˆ°ï¼Œè¯·é‡æ–°æ’å…¥ USB è¯»å¡å™¨ï¼‰ã€‚è½¬åˆ°è¯¥ç£ç›˜ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºçš„æ–°æ–‡æœ¬æ–‡ä»¶**_`ssh without 'txt' extension`_**.å¦‚æœçœ‹ä¸åˆ°ï¼Œè¯·åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨é€‰é¡¹ä¸­ç¦ç”¨â€œéšè—å·²çŸ¥æ–‡ä»¶ç±»å‹çš„æ‰©å±•åâ€ã€‚

<p align="center">
 <img src="https://i.imgur.com/eV6uMbz.jpg">

<i>å°† SD å¡æ”¾å…¥ Raspberry Piï¼Œæ’å…¥ä»¥å¤ªç½‘ç”µç¼†å¹¶å¯åŠ¨</i>

## ä½¿ç”¨ SSH è®¿é—® Pi OS

-   ç­‰å¾… Pi é¦–æ¬¡å¯åŠ¨

-   æ‰“å¼€æµè§ˆå™¨å¹¶ç™»å½•è·¯ç”±å™¨çš„é¢æ¿é¡µé¢

-   æŸ¥æ‰¾è¿æ¥åˆ°æ‚¨çš„ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡çš„åˆ—è¡¨å¹¶å¤åˆ¶ Raspberry Pi çš„ IP åœ°å€ï¼ˆå®ƒå¾ˆå¯èƒ½æœ‰ä¸»æœºå`raspberrypi`)

-   åœ¨ä¸»æœºä¸Šæ‰“å¼€ç»ˆç«¯ã€‚æ‚¨å¯ä»¥åœ¨ Windows ä¸Šä½¿ç”¨ powerShell æˆ–åœ¨ Android ä¸Šä½¿ç”¨ RaspControllerã€‚

é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

    ssh pi@pi's IP address

<i>æ‚¨å¯ä»¥ä½¿ç”¨é¼ æ ‡å³é”®åœ¨ Windows powerShell ä¸­ç²˜è´´æ–‡æœ¬</i>.

æŒ‡çº¹é—®é¢˜è¾“å…¥â€œyesâ€ï¼Œé»˜è®¤å¯†ç è¾“å…¥â€œraspberryâ€ï¼ˆå¯†ç åœ¨å‘½ä»¤è¡Œä¸­ä¸å¯è§ï¼‰ã€‚ä½ å¯ä»¥è¾“å…¥**_`sudo passwd pi`_**æ›´æ”¹å¯†ç ã€‚

<p align="center">
 <img src="https://i.imgur.com/Wf30jxG.jpg">

åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š

    sudo apt update -y && sudo apt upgrade -y

__å®Œæˆåé‡å¯__

    sudo reboot

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

# 

<h1 align="center"><b><i>Install AdGuard Home</b></i> </h1>

è¿™ä¸ªå®‰è£…è„šæœ¬æ¥è‡ª<a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md"><b>AdGuard ä¸»é¡µ</b></a>ä¸»è¦é¡¹ç›®ã€‚å…³æ³¨ä»¥ä¿æŒæ›´æ–°ã€‚

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    curl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v

-   å®‰è£…å®Œæˆåï¼Œç»ˆç«¯ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£æ˜¾ç¤º`links`åˆ°æ‚¨çš„ AdGuard ä¸»é¡µï¼ˆå¼€å§‹ä½¿ç”¨ï¼‰

-   `IMPORTANT:`åœ¨ Listen Interfaces é€‰é¡¹ä¸­é€‰æ‹©`Eth0`ç„¶åé€‰æ‹©ä¸‹ä¸€æ­¥

    <p align="center">
     <img src="https://i.imgur.com/Wa00lDp.jpg" width=580px height=690px>

-   è®¾ç½®ç”¨æˆ·åå’Œå¯†ç å¹¶ç™»å½•åˆ°ç®¡ç†é¢æ¿

-   `IMPORTANT:`åœ¨å¸¸è§„è®¾ç½®ä¸­ï¼Œå°†â€œæŸ¥è¯¢æ—¥å¿—ä¿ç•™â€è®¾ç½®ä¸º`24 hours`. ï¼ˆæˆ‘è¯»åˆ°å¯¹äºæŸäº›äººæ¥è¯´ï¼Œæ—¥å¿—å·²æ»¡ï¼Œè¿™ä¼šå‡æ…¢ Pi å¹¶éœ€è¦é‡æ–°å¯åŠ¨ï¼‰

## è®¾ç½®æ‚¨çš„è®¾å¤‡ä»¥ä½¿ç”¨ AdGuard

-   å¯¹äº Android/Appleï¼Œè¯·è½¬åˆ° WiFi é«˜çº§è®¾ç½®å¹¶é€‰æ‹©é™æ€é€‰é¡¹ã€‚åœ¨`DNS 1`å­—æ®µè¾“å…¥â€œPiçš„IPâ€åœ°å€

    <p align="center">
     <img src="https://i.imgur.com/nxpiqDw.jpg" width=450px height=580px>

-   é€‚ç”¨äº PC/Windows

    -   <i>Ğ˜Ğ¿Ğ²Ñ‡</i>

        è½¬åˆ°ç½‘ç»œè®¾ç½®/æ›´æ”¹é€‚é…å™¨é€‰é¡¹å¹¶å³é”®å•å‡»å±æ€§ï¼Œç„¶åé€‰æ‹©â€œInternet åè®®ç‰ˆæœ¬ 4ï¼ˆTCP/IPv4ï¼‰â€ã€‚è¾“å…¥ Pi çš„ IP åœ°å€`Preferred DNS`æœåŠ¡å™¨ã€‚

    -   <i>IPv6ï¼ˆéœ€è¦`DoH`&`DoT`å¦‚æœåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨ IPv6ï¼Œè¯·ç¨ååœ¨æŒ‡å—ä¸­å·¥ä½œï¼‰</i>

        è½¬åˆ°â€œInternet åè®®ç‰ˆæœ¬ 6ï¼ˆTCP/IPv6ï¼‰â€è¾“å…¥`::1`

`OPTIONAL:`<i>æ‚¨å¯ä»¥åœ¨æ›¿ä»£å­—æ®µä¸­æ·»åŠ å¤‡ç”¨ DNS</i>

`BE AWARE:`<i>åœ¨ android ä¸­ï¼Œåœ¨ç¬¬äºŒä¸ªå­—æ®µä¸­æ·»åŠ å…¬å…± DNS ä¼šç ´å AdGuard å¹¿å‘Šæ‹¦æˆª</i>

<p align="center">
 <img src="https://i.imgur.com/8gsDk3z.jpg">

## è®¾ç½® AdGuard é˜»æ­¢åˆ—è¡¨

åœ¨ AdGuard ä¸»é¡µçš„è¿‡æ»¤å™¨ä¸‹ï¼Œé€‰æ‹© DNS é˜»æ­¢åˆ—è¡¨éƒ¨åˆ†ä»¥æ·»åŠ  URLã€‚

<p align="center">
 <img src="https://i.imgur.com/shrtJLD.png">

æ‚¨å¯ä»¥åœ¨ Google ä¸Šæœç´¢ä¸åŒçš„é˜»æ­¢åˆ—è¡¨ã€‚è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰é˜»æ­¢åˆ—è¡¨[<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/My-Blocklist.txt"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]ä½¿ç”¨æˆ‘çš„ URL æˆ–ä»è¿™äº›æ¥æºæ„å»ºæ‚¨è‡ªå·±çš„[<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/main/%F0%9F%A7%B1Blocklist-Sources%E2%84%B9%EF%B8%8F"><b>ç‚¹å‡»è¿™é‡Œ</b></a>].

`IMPORTANT:`ä¸€äº›é˜»æ­¢åˆ—è¡¨å¯ä»¥é˜»æ­¢ä¸€äº›é‡è¦çš„å†…å®¹æˆ–ç½‘ç«™ã€‚è¦å–æ¶ˆé˜»æ­¢ï¼Œè¯·è½¬åˆ°â€œæŸ¥è¯¢æ—¥å¿—â€éƒ¨åˆ†ï¼Œç„¶åä¼šçœ‹åˆ°_è§£é™¤å°é”_å½“å…‰æ ‡æ‚¬åœåœ¨æŸ¥è¯¢ä¸Šæ—¶çš„é€‰é¡¹ï¼Œå°†æœªé˜»æ­¢çš„ç½‘ç«™æ”¾åœ¨â€œè‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™â€ç¤ºä¾‹ä¸­ï¼š`@@||bitly.com^$important`.æŸ¥æ‰¾å®¢æˆ·ç«¯ IP å’Œæ—¶é—´ã€‚

## æ·»åŠ /åˆ é™¤å¤šä¸ª URL

æ‚¨ç°åœ¨åªèƒ½ä½¿ç”¨ AdGuard åœ¨ DNS é˜»æ­¢åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ª URLï¼Œä½†æ˜¯æœ‰ä¸€ä¸ª python è„šæœ¬å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ª URLã€‚

æ‰“å¼€æ–°çš„ py æ–‡ä»¶ï¼ˆbulkurls.pyï¼‰ï¼š

    nano bulkurls.py

ç„¶åå¤åˆ¶ç²˜è´´è„šæœ¬é…ç½®[<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/bulkurls.py"><b>ç‚¹å‡»è¿™é‡Œ</b></a>].æ”¾`your AdGuard credentials`å¹¶ä¿å­˜ï¼ˆcontrol+x ç„¶å y ç„¶åè¾“å…¥ï¼‰ã€‚

_å¦‚æœä½¿ç”¨**é¥®é£Ÿæ´¾**å®‰è£…`sudo apt-get install python3-pip -y && pip install requests`å› ä¸ºå®ƒé»˜è®¤ä¸å®‰è£…ã€‚_

è·‘æ­¥ ï¼š`sudo python3 bulkurls.py`

åˆ°**æ¶ˆé™¤**ä½ éœ€è¦æ”¹å˜`add`åœ¨<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/62ba01ed8ed3a5bc5294b9fe7ee38c3e83ae1b86/bulkurls.py#L150"><b>æœ€åä¸€è¡Œçš„ç¬¬äºŒä¸ª</b></a>åˆ°`remove`åœ¨ bulkurls.py æ–‡ä»¶ä¸­ã€‚

å»[HTTPS://çš„3Ward.GitHub.IO/too LZ/AD block.HTML](https://d3ward.github.io/toolz/adblock.html)æµ‹è¯•å¹¿å‘Šæ˜¯å¦è¢«å±è”½<img src="https://i.imgur.com/Q5oO9EY.png" width=100px height=80px>

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

# 

<h1 align="center"><b><i>Install Unbound</b></i> </h1>

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    sudo apt install unbound -y

ä¸ºäº†é€’å½’æŸ¥è¯¢æœªç¼“å­˜ä¸ºåœ°å€çš„ä¸»æœºï¼Œè§£æå™¨éœ€è¦ä»æœåŠ¡å™¨æ ‘çš„é¡¶éƒ¨å¼€å§‹å¹¶æŸ¥è¯¢æ ¹æœåŠ¡å™¨ï¼Œä»¥äº†è§£è¦æŸ¥è¯¢çš„åœ°å€çš„é¡¶çº§åŸŸçš„å»å‘ã€‚ Unbound å¸¦æœ‰é»˜è®¤çš„å†…ç½®æç¤ºã€‚

    wget -O root.hints https://www.internic.net/domain/named.root && sudo mv root.hints /var/lib/unbound/

`IMPORTANT:`è¿™éœ€è¦æ¯ 6 ä¸ªæœˆæ›´æ–°ä¸€æ¬¡ã€‚åˆ°_**è‡ªåŠ¨æ›´æ–°**_root.hints ä½ éœ€è¦æ¯ 6 ä¸ªæœˆåˆ›å»ºä¸€ä¸ª cron ä½œä¸šã€‚

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥`crontab -e`ï¼Œå®ƒä¼šè¦æ±‚é€‰æ‹©ä¸€ä¸ªç¼–è¾‘å™¨ï¼ˆé€‰æ‹© 1ï¼‰å¹¶å°†è¿™äº›è¡Œç²˜è´´åˆ° crontab çš„åº•éƒ¨å¹¶ä¿å­˜ï¼ˆcontrol+x ç„¶å y ç„¶åè¾“å…¥ï¼‰ï¼š

    1 0 1 */6 * wget -O root.hints https://www.internic.net/domain/named.root
    2 0 1 */6 * sudo mv root.hints /var/lib/unbound/

_å¦‚æœä½¿ç”¨**é¥®é£Ÿæ´¾**æ‚¨éœ€è¦å®‰è£… resolvconf å¹¶é‡æ–°å¯åŠ¨ unbound-resolvconf.service ä»¥å°† unbound nameserver è®¾ç½®ä¸º 127.0.0.1 ï¼š_

    sudo apt-get install resolvconf -y && sudo systemctl restart unbound-resolvconf.service

<p align="center">
 <img src="https://i.imgur.com/26ro62t.jpg">

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

# 

<h1 align="center"><b><i>Install Cloudflare</b></i> </h1>

## Cloudflared çš„è®¾ç½®`(DoH)`

[<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Cloudflare-DoH-Setup.md"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]</h4>

## é…ç½® Cloudflare`(DoT)`åœ¨æœªç»‘å®š

é€šè¿‡åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹è¾“å…¥æ¥åˆ›å»ºæœªç»‘å®šçš„é…ç½®æ–‡ä»¶ï¼š

    sudo nano /etc/unbound/unbound.conf.d/unbound.conf

å¹¶å¤åˆ¶å¹¶ç²˜è´´æ­¤ unbound.conf æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡æœ¬[<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/unbound.conf"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]å¹¶ä¿å­˜ï¼ˆcontrol+x ç„¶å y ç„¶åè¾“å…¥ï¼‰ã€‚

## ä¸ºæœªç»‘å®šé…ç½® Stubby

ä½¿ç”¨ Unbound è¿›è¡Œç¼“å­˜å¹¶ä½¿ç”¨ stubby ä½œä¸º TLS è½¬å‘å™¨ã€‚å®‰è£…ç²—çŸ­ï¼š

    sudo apt install stubby -y

åˆ é™¤å¹¶é‡æ–°åˆ›å»º stubby.yaml æ–‡ä»¶ï¼š

    cd /etc/stubby/ && sudo rm stubby.yml && sudo nano stubby.yml

å¹¶å¤åˆ¶å¹¶ç²˜è´´æ­¤ stubby é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡æœ¬[<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/stubby.yml"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]å¹¶ä¿å­˜ã€‚ (`cd`å®Œæˆåè¿”å›ä¸»æ–‡ä»¶å¤¹ï¼‰ã€‚

-   é‡å¯ unbound & stubby å¹¶æ£€æŸ¥çŠ¶æ€ï¼š


    sudo systemctl restart unbound stubby ; systemctl status unbound stubby -l

<p align="center">
 <img src="https://i.imgur.com/7zIpWP2.jpg" width=650px height=370px>

## é…ç½® AdGuard`Cloudflare(DoH&DoT)`

-   åœ¨ AdGuard ä¸»é¡µçš„è®¾ç½®ä¸‹é€‰æ‹©â€œDNS è®¾ç½®â€

-   ä»â€œUpstreamâ€å’Œâ€œBootstrap DNSâ€æœåŠ¡å™¨é€‰é¡¹ä¸­åˆ é™¤æ‰€æœ‰å†…å®¹å¹¶è¾“å…¥ï¼š

    -   ä¸ºäº†`DNS over TLS(DoT)`æ·»åŠ `127.0.0.1:53`åœ¨â€œä¸Šæ¸¸â€å’Œâ€œå¼•å¯¼ DNSâ€æœåŠ¡å™¨å­—æ®µä¸­
    -   ä¸ºäº†`DNS over HTTPS(DoH)`æ·»åŠ `127.0.0.1:5053`åœ¨â€œä¸Šæ¸¸â€å’Œâ€œå¼•å¯¼ DNSâ€æœåŠ¡å™¨å­—æ®µä¸­
    -   ä¸ºäº†`TLS forwarder(stubby)`æ·»åŠ `127.0.0.1:8053`åœ¨â€œä¸Šæ¸¸â€å’Œâ€œå¼•å¯¼ DNSâ€æœåŠ¡å™¨å­—æ®µä¸­

-   `IMPORTANT:`ä½ éœ€è¦æ£€æŸ¥â€œ<a href="https://adguard.com/en/blog/in-depth-review-adguard-home.html#dns"><b>å¹¶è¡Œè¯·æ±‚</b></a>" DNS è§£æå™¨åŒæ—¶å·¥ä½œçš„é€‰é¡¹ã€‚

<p align="center">
 <img src="https://i.imgur.com/Ug4Euou.jpg" width=650px height=370px>

-   ç„¶ååœ¨ DNS è®¾ç½®ä¸­æŸ¥æ‰¾ DNS ç¼“å­˜é…ç½®éƒ¨åˆ†å¹¶å°†ç¼“å­˜å¤§å°è®¾ç½®ä¸º`0`ï¼ˆç¼“å­˜å·²ç”± Unbound å¤„ç†ï¼‰å¹¶å•å‡»åº”ç”¨ã€‚

<p align="center">
 <img src="https://i.imgur.com/8Q5Zb0M.jpg" width=650px height=370px>
 
<b>Click apply and test upstreams</b>(might get a error in the first testing only).

#### `IMPORTANT:`Windows ç³»ç»Ÿå’Œ Android æµè§ˆå™¨éœ€è¦ä¸€äº›è°ƒæ•´`stabilize`DNS è§£æå™¨..Linux å·¥ä½œæ­£å¸¸<i>ï¼ˆåœ¨è–„è·ä¸Šæµ‹è¯•ï¼‰</i>

### è§†çª—

-   å®‰è£… Acrylic DNS ä»£ç†ï¼š[HTTPS://èš‚èšAkron.alter vista.org/support/acrylic/home.htm](https://mayakron.altervista.org/support/acrylic/Home.htm)

-   å»`C:\Program Files (x86)\Acrylic DNS Proxy`å¹¶æ‰“å¼€`AcrylicConfiguration.ini`æ–‡ä»¶ã€‚åˆ é™¤æ‰€æœ‰å†…å®¹å¹¶å¤åˆ¶è¿™äº›è®¾ç½®[<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/AcrylicConfiguration.ini"><b>ç‚¹å‡»è¿™é‡Œ</b></a>], åªæ”¹å˜_**ä¸»æœåŠ¡å™¨åœ°å€**_åˆ°ä½ çš„ Pi çš„åœ°å€ã€‚

-   åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­è¿è¡Œ`RestartAcrylicService.bat`&`PurgeAcrylicCacheData.bat`

    `TIP:`IP/DNS å‘½ä»¤æ•…éšœæ’é™¤

        ipconfig /release
        ipconfig /renew
        ipconfig /flushdns

### å®‰å“

-   åœ¨æ‚¨ä½¿ç”¨çš„ä»»ä½•æµè§ˆå™¨ä¸­ï¼Œæ‰“å¼€**ç¦»å¼€**`Use Secure DNS`é€‰é¡¹ã€‚
-   è¯·æ³¨æ„ï¼Œä½¿ç”¨ build.prop DNS è°ƒæ•´æˆ–åº”ç”¨ç¨‹åº/Magisk æ¨¡å—çš„è‡ªå®šä¹‰æ ¹ roms å’Œå†…æ ¸å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚

#### _å°±æ˜¯è¿™æ ·_.ç°åœ¨å»[HTTPS://1.1.1.1/help](https://1.1.1.1/help)åœ¨æµè§ˆå™¨ä¸­ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°è¿™äº›é€‰é¡¹è¾“å‡ºâ€œæ˜¯â€ã€‚

-   [x] è¿æ¥åˆ° 1.1.1.1
-   [x] HTTPS ä¸Šçš„ DNSï¼ˆDoHï¼‰
-   [x] åŸºäº TLS çš„ DNSï¼ˆDoTï¼‰
-   [ ] åŸºäº WARP çš„ DNS
    <p align="center">
     <img src="https://i.imgur.com/2S3IH5H.jpg" width=650px height=370px>

#### å…¶ä»–æ£€æŸ¥å®‰å…¨çš„ç½‘ç«™

[HTTPS://browser leaks.com/DNS](https://browserleaks.com/dns)- åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰è¿æ¥åˆ°â€œCloudflareâ€

[HTTPS://å‘œå‘œå‘œ.cloud flare.com/æ”¶è§†ç‡/encrypted-æ˜¯ä½ /](https://www.cloudflare.com/ssl/encrypted-sni/)- â€œå®‰å…¨ DNS / DNSSEC / TLS 1.3â€åº”è¯¥éƒ½æ˜¯ç»¿è‰²çš„å‹¾

[HTTPS://DNS Sec.vs.uä½ -æ¯’è›¾.çš„/](https://dnssec.vs.uni-due.de/)- åº”è¯¥è¯´â€œæ˜¯çš„ï¼Œæ‚¨çš„ DNS è§£æå™¨éªŒè¯ DNSSEC ç­¾åâ€

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

# 

<h1 align="center"><b><i>Install WireGuard</b></i> </h1>

**å®‰è£… WireGuard ä¹‹å‰**, å¦‚æœä½ æ²¡æœ‰<a href="https://www.google.com/search?client=firefox-b-d&q=static+IP"><b>é™æ€IP</b></a>ä½ éœ€è¦å¾—åˆ°ä¸€ä¸ªå…è´¹çš„`Dynamic DNS Subdomain`å¦åˆ™æ‚¨çš„å¤–éƒ¨ IP åœ°å€ä¼šä»æ‚¨çš„ ISP åŠ¨æ€æ›´æ”¹ï¼Œå› æ­¤æ‚¨éœ€è¦è®¾ç½®åŠ¨æ€ DNS æœåŠ¡[**<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Dns-Service-Guide.md"><b>ç‚¹å‡»è¿™é‡Œ</b></a>**].å¦åˆ™è·³è¿‡è¿™ä¸€æ­¥ã€‚

æ‚¨è¿˜éœ€è¦è®¾ç½®<a href="https://www.google.com/search?q=What+is+port+forwarding+used+for%3F&client=firefox-b-d&sxsrf=APq-WBuwPqGlPJ6N9_l6qpQ3e5sYoUxZAQ%3A1650219365125&ei=ZVlcYo6sB6SGwbkP8tGOwA8&ved=0ahUKEwjO8ryY2pv3AhUkQzABHfKoA_gQ4dUDCA0&uact=5&oq=What+is+port+forwarding+used+for%3F&gs_lcp=Cgdnd3Mtd2l6EAMyBggAEBYQHjoHCAAQRxCwAzoHCAAQsAMQQ0oECEEYAEoECEYYAFDMAVjMAWCBBWgBcAF4AIABbIgBbJIBAzAuMZgBAKABAqABAcgBCsABAQ&sclient=gws-wiz"><b>è½¬å‘ç«¯å£</b></a>åœ¨æ‚¨çš„è·¯ç”±å™¨ä¸Šï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨æˆ‘ä»¬çš„ç½‘ç»œä¹‹å¤–è®¿é—® WireGuardï¼Œä¾‹å¦‚åœ¨å’–å•¡åº—çƒ­ç‚¹æˆ–æ‚¨çš„ç§»åŠ¨æ•°æ®ä¸­ã€‚
ç±»å‹ |ä»·å€¼  
------------ \| -------------
è®¾å¤‡ | Raspberry Pi çš„ä¸»æœºåæˆ– IP
åè®® | UDP
ç«¯å£èŒƒå›´ | 51820-51820
å‡ºæ¸¯ | 51820
å…è®¸äº’è”ç½‘è®¿é—®ï¼ˆå¦‚æœæœ‰ï¼‰|æ˜¯çš„

æˆ‘çš„ğŸ‘‡è·¯ç”±å™¨ğŸ‘‡ç«¯å£è®¾ç½®ã€‚ä½ çš„å¯èƒ½ä¸åŒï¼Œä½†ä½ ä¼šæ˜ç™½çš„ã€‚è®°ä½è°·æ­ŒğŸ”æœç´¢å¼•æ“ğŸ”æ˜¯ä½ çš„æœ‹å‹ã€‚å¦‚æœæ‚¨æ— æ³•ä»å¤–éƒ¨ç½‘ç»œè¿›è¡Œè¿æ¥ï¼Œè¿™æ„å‘³ç€ ISP å·²é˜»æ­¢ä¼ å‡ºè¿æ¥ï¼Œæ‚¨å¯ä»¥æ‰“ç”µè¯ç»™ä»–ä»¬å¹¶å¾ˆå¥½åœ°è¯¢é—®ä»¥ä½¿å…¶æ­£å¸¸å·¥ä½œã€‚

<p align="center">
 <img src="https://i.imgur.com/9LBEk1i.jpg">

* * *

ğŸ‘Šéå¸¸æ„Ÿè°¢ğŸ‘Šè¿™ä¸ªå®‰è£…è„šæœ¬æ¥è‡ª<a href="https://github.com/Nyr/wireguard-install"><b>å°¼å°”</b></a>.å…³æ³¨ä»¥ä¿æŒæ›´æ–°ã€‚

åœ¨ç»ˆç«¯è¿è¡Œ

    wget https://git.io/wireguard -O wireguard-install.sh && sudo bash wireguard-install.sh

-   è¯¥è„šæœ¬å°†è¦æ±‚æ‚¨æä¾› VPN çš„å…¬å…± IPv4/ä¸»æœºåã€‚_å¦‚æœ_æ‚¨æœ‰é™æ€ IP ç„¶åç»§ç»­ï¼Œå¦åˆ™é”®å…¥æ‚¨ä»<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Dns-Service-Guide.md"><b>æŒ‡ç¤º</b></a>.ä¾‹å¦‚ï¼štrinibvpn.freeddns.org

-   å¯¹äºç«¯å£é€‰é¡¹`press enter`é»˜è®¤ä¸º 51820ã€‚å¯¹äºå®¢æˆ·ç«¯åç§°ï¼Œåªéœ€è¾“å…¥æ‚¨æƒ³è¦çš„ä»»ä½•åç§°ï¼Œå¯¹äº DNS ä½¿ç”¨é€‰é¡¹ 3 (`1.1.1.1`ï¼‰ ç›®å‰ã€‚æ‚¨å°†é…ç½®`AdGuard/Unbound/Cloudflare`å®‰è£…å®Œæˆåä½¿ç”¨VPNã€‚

<p align="center">
 <img src="https://i.imgur.com/WUNZIK4.jpg">

-   ç­‰å¾…å®‰è£…å®Œæˆå¹¶æ˜¾ç¤ºäºŒç»´ç ï¼Œä¸è¦å…³é—­ã€‚ä½†å¦‚æœä½ è¿™æ ·åšï¼Œ`regenerate qrcode`, è¾“å…¥ç»ˆç«¯ä½†åªæ›¿æ¢åç§°`yourclientname.conf`æ–‡ä»¶åˆ°ä½ çš„ï¼š


    sudo cp /root/yourclientname.conf /home/pi && sudo qrencode -t ansiutf8 < yourclientname.conf

`IMPORTANT:`æ‚¨éœ€è¦ä¸ºä¸ VPN ä¸€èµ·ä½¿ç”¨çš„æ¯å°è®¾å¤‡æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·/å®¢æˆ·ç«¯ã€‚è¦æ·»åŠ æ–°ç”¨æˆ·ï¼Œåªéœ€é‡æ–°è¿è¡Œè„šæœ¬å¹¶åˆ›å»ºå…·æœ‰ä¸åŒå®¢æˆ·ç«¯åç§°çš„ç”¨æˆ·ã€‚

<b>é‡‡ç”¨_å¼€æ”¾å¼VPN_</b>[<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/OpenVPN-Setup.md"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]

# 

### å°† VPN è¿æ¥åˆ° Android/IOS æ‰‹æœº

ä» Google Play æˆ– App Store å®‰è£… WireGuard åº”ç”¨ç¨‹åºï¼š

WireGuardï¼ˆè°·æ­Œæ’­æ”¾ï¼‰ï¼š[HTTPS://play.Google.com/store/apps/details?ID=com.wire guard.Android](https://play.google.com/store/apps/details?id=com.wireguard.android)

WireGuardï¼ˆåº”ç”¨å•†åº—ï¼‰ï¼š[HTTPS://apps.apple.com/US/app/wire guard/ID1441195209](https://apps.apple.com/us/app/wireguard/id1441195209)

æ‚¨éœ€è¦ä½¿ç”¨ WireGuard åº”ç”¨ç¨‹åºæ‰«æç»ˆç«¯ä¸­æ˜¾ç¤ºçš„äºŒç»´ç ï¼Œé€‰æ‹©`+ button`å¹¶ä½¿ç”¨è¯¥é€‰é¡¹`Scan from QR code`å®‰è£…é…ç½®ã€‚

`IMPORTANT`ï¼š ä½¿èƒ½å¤Ÿ**å†…æ ¸æ¨¡å—åç«¯**åœ¨è®¾ç½®ä¸­

<p align="left">
 <img src="https://i.imgur.com/R4qbiOQ.jpg" width=250px height=350px>

### å°† VPN è¿æ¥åˆ° Windows

ç”¨äºçª—æˆ·çš„ WireGuardï¼š[HTTPS://download.wire guard.com/Windows-client/wire guard-installer.exe](https://download.wireguard.com/windows-client/wireguard-installer.exe)

-   åˆ›å»ºä¸€ä¸ª`new text document`ä½¿ç”¨ PV ä¸Šçš„ä»»ä½•åç§°å¤åˆ¶ç²˜è´´ WireGuard å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­çš„æ–‡æœ¬ã€‚

-   è¦æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­çš„æ–‡æœ¬ï¼Œè¯·è¾“å…¥ç»ˆç«¯ï¼š


    sudo cat /root/yourclientname.conf

-   çªå‡ºæ˜¾ç¤ºæ‰€æœ‰æ–‡æœ¬ï¼Œå°†å…¶å¤åˆ¶å¹¶ç²˜è´´åˆ° PC ä¸Šçš„ txt æ–‡ä»¶ä¸­å¹¶ä¿å­˜ã€‚ç„¶åé‡å‘½åæ‰©å±•å`txt`åˆ°`conf`.ç°åœ¨æ‚¨æœ‰äº†è¯¥ WireGuard å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ã€‚

-   æ‚¨ç°åœ¨å¯ä»¥å°†é…ç½®æ–‡ä»¶å¯¼å…¥ WireGuardï¼ˆä»æ–‡ä»¶å¯¼å…¥é€‰é¡¹ï¼‰ã€‚

## é…ç½® WireGuard`Adguard/Unbound/Cloudflare`

_è¯·è®°ä½ï¼Œè¿™é€‚ç”¨äºå½“æ‚¨åœ¨å¤–éƒ¨ç½‘ç»œä¸Šæˆ–åœ¨å®¶ä¸­ 24/7 è¿æ¥åˆ° WireGuard VPN æ—¶ï¼Œå› ä¸ºæ‚¨å·²ç»åœ¨æ‚¨çš„è®¾å¤‡ä¸Šæ‰‹åŠ¨è®¾ç½®å’Œè¿è¡Œ AdGuard/Unbound/Cloudflareã€‚_ï¼ˆæ ¹æ®æˆ‘çš„ç»éªŒè®¾ç½®ä¸¤è€…éƒ½æ²¡æœ‰é—®é¢˜ï¼‰

-   åœ¨ WireGuard åº”ç”¨ç¨‹åºä¸­ï¼Œé€‰æ‹©æ‚¨çš„éš§é“å¹¶é€‰æ‹©ç¼–è¾‘ï¼ˆå³ä¸Šè§’çš„é“…ç¬”ï¼‰

-   åœ¨ DNS æœåŠ¡å™¨ä¸‹è¾“å…¥`Pi's IP`å¹¶ä¿å­˜ï¼ˆIPv4 å’Œ IPv6ï¼‰

<p align="center">
 <img src="https://i.imgur.com/UC0vWfE.jpg" width=450px height=500px>  

### é™åˆ¶æµé‡

ä½¿ç”¨ WireGuardï¼Œæ‚¨å°†å¤±å»å¤§çº¦ 50% çš„äº’è”ç½‘é€Ÿåº¦ï¼Œå¯¼è‡´é€šè¿‡ Pi éš§é“åˆ°è·¯ç”±å™¨åˆ°è®¾å¤‡çš„è¿‡ç¨‹\*\*

åˆ é™¤å…è®¸çš„ IPs "0.0.0.0/0, ::/0" é€‰é¡¹ï¼Œå› ä¸ºå®ƒå°†æ‰€æœ‰æµé‡è·¯ç”±åˆ°æ‚¨çš„å®¶åº­ç½‘ç»œï¼Œè¿™ä¼šå¾ˆæ…¢ã€‚æ‚¨åªéœ€è¦é€šè¿‡æ‚¨çš„åœ°å€å‘é€æµé‡ã€‚

-   é¦–å…ˆï¼Œæ‚¨éœ€è¦å°†å…¶æ›¿æ¢ä¸ºæ‚¨çš„ç½‘ç»œç½‘å…³ï¼Œä½†å°†æœ€åä¸€ä¸ªæ•°å­—è®¾ç½®ä¸ºé›¶å¹¶ä¸”<a href="https://www.google.com/search?q=prefix+length+explained&client=firefox-b-d&sxsrf=ALeKk036Jc9vJl73zVXf0yyZs5UlKRlNRQ%3A1621083125589&ei=9cOfYI66I5-qwbkPkdWxkAk&oq=prefix+length+explained&gs_lcp=Cgdnd3Mtd2l6EAMyBggAEAcQHjoHCCMQsAMQJzoHCAAQRxCwA1CUJ1iUJ2CiKmgBcAJ4AIABsAGIAdQCkgEDMC4ymAEAoAEBqgEHZ3dzLXdpesgBCcABAQ&sclient=gws-wiz&ved=0ahUKEwjOiOie3cvwAhUfVTABHZFqDJIQ4dUDCA0&uact=5"><b>å‰ç¼€é•¿åº¦</b></a>è‡³ 24. ä¾‹å¦‚ï¼š`192.168.1.1/24`åˆ°`192.168.1.0/24`æˆ–è€…åƒæˆ‘çš„ ISP è·¯ç”±å™¨`192.168.100.1/24`åˆ°`192.168.100.0/24`.~~**ç°åœ¨æˆ‘åªæŸå¤± 25% çš„é€Ÿåº¦**ğŸ˜ï¼ˆPS.ä½¿ç”¨5gç½‘ç»œï¼‰~~

`UPDATE:`åœ¨ WireGuard æ›´æ–°åï¼Œæˆ‘æ²¡æœ‰å¾—åˆ°æ›´å¿«çš„é€Ÿåº¦ğŸ˜ .. ä½†å®ƒä»ç„¶æœ‰æ„ä¹‰_ä¸æ˜¯_ä½¿ç”¨`"0.0.0.0/0, ::/0`å¸¦æ— çº¿ç½‘ç»œã€‚å¦‚æœæœ‰äººçŸ¥é“ä»»ä½•è°ƒæ•´ä»¥è·å¾—æå‡ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

<p align="center">
 <img src="https://i.imgur.com/x4m6Pbl.jpg" width=450px height=500px>

### è¯·é˜…è¯» ï¼ï¼ ï¼Œ æ„è¯†åˆ° ï¼ï¼

`IMPORTANT`:_å¦‚æœæ‚¨çš„ç½‘ç»œå…·æœ‰ä»¥ 3 ä½æ•°å­—ï¼ˆè¶…è¿‡ 24 ä¸ªï¼‰ç»“å°¾çš„è®¾å¤‡çš„ IP åœ°å€ï¼Œä¾‹å¦‚ï¼š192.168.100ã€‚`254`ï¼Œæ‚¨å°†æ— æ³•ä»å¤–éƒ¨ç½‘ç»œæ­£ç¡®è·¯ç”±ï¼Œå› ä¸ºåº”ç”¨ 24 ä»…å…è®¸æ•°å­— 1 åˆ° 24ã€‚æ‚¨éœ€è¦æ”¹ä¸º`0`è·¯ç”±è¶…å‡º 24 èŒƒå›´ï¼Œä¾‹å¦‚ï¼š`192.168.100.0/0`_.

æˆ–è€…æ‚¨å¯ä»¥æ›´æ”¹è·¯ç”±å™¨ä¸Šçš„ IP èŒƒå›´ï¼ˆæ ¹æ®æˆ‘çš„ç»éªŒï¼Œæ‚¨å¯èƒ½ä¼šè·å¾—æ›´å¥½çš„é€Ÿåº¦ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨ 24 èŒƒå›´å†…è·¯ç”±ä¸å¿…è¦çš„å…è®¸ IP åœ°å€ï¼‰ã€‚

<p align="center">
 <img src="https://i.imgur.com/ZZ4aMUI.jpg" width=750px height=550px>

## Ğ˜Ğ¿Ğ²Ñˆ

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ IPv6ï¼Œå½“è¿æ¥åˆ° WiFi æ—¶ï¼Œæ‚¨éœ€è¦è¾“å…¥ WireGuard å…è®¸çš„ IP`fe80::1/0`ä¹Ÿæ˜¯ã€‚ä¾‹å¦‚`192.168.100.0/0, fe80::1/0`

åœ¨ windows PC ä¸Šè¿æ¥ä»¥å¤ªç½‘ç”µç¼†æ—¶ï¼Œæ‚¨éœ€è¦è¾“å…¥`::1`åœ¨â€œInternet åè®®ç‰ˆæœ¬ 6(TCP/IPv6)â€é¦–é€‰ DNS æœåŠ¡å™¨ä¸­çš„ IPv6 åœ°å€ä¸­ã€‚

ç„¶åå»[HTTPS://IP V6leak.com/](https://ipv6leak.com/)ä½ åº”è¯¥çœ‹åˆ°â€œ_æ‚¨çš„ IPv6 æ²¡æœ‰æ³„æ¼_".

# 

## ç¦ç”¨æ‰€æœ‰ IPv6

#### å¦‚æœæ‚¨æ²¡æœ‰æˆ–ä¸æƒ³è¦å®ƒï¼Œè¯·ç¦ç”¨ IPv6[<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/main/Disable-All-IPv6.md"><b>ç‚¹å‡»è¿™é‡Œ</b></a>].ç»“æœï¼Œå¦‚æœæ‚¨çš„äº’è”ç½‘è¾ƒå¼±ï¼Œç¦ç”¨ IPv6 å¯ä»¥åŠ å¿« dns è¯·æ±‚ï¼Œä½†å®‰å…¨æ€§è¾ƒä½ã€‚

# 

## æµ‹è¯• VPN

ä½ æ€ä¹ˆçŸ¥é“ WireGuard VPN æ˜¯å¦çœŸçš„æœ‰æ•ˆï¼Ÿ

ä¸ºäº†**è§†çª—**ä¸‹è½½ Wiresharkï¼š[HTTPS://å‘œå‘œå‘œ.Wireshark.org/#download](https://www.wireshark.org/#download)

ä¸‹è½½åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºæ£€æŸ¥åè®®è®¾ç½®ä¸º WireGuard VPN ä½¿ç”¨çš„åè®®çš„æ•°æ®åŒ…ã€‚å½“æ•°æ®åŒ…æµé‡`encrypted`ï¼Œä¾‹å¦‚å¯ä»¥è¿™æ ·è¯»ï¼š

<p align="center">
 <img src="https://i.imgur.com/Tn4M47R.jpg">

ä¸ºäº†**å®‰å“**ä½ å¯ä»¥ä½¿ç”¨ PCAPdroidï¼š[HTTPS://play.Google.com/store/apps/details?ID=com.Emanueleå‘.remote_capture&åæ¥=æ©&å…¬é‡Œ=US](https://play.google.com/store/apps/details?id=com.emanuelef.remote_capture&hl=en&gl=US)

æ‚¨åº”è¯¥çœ‹åˆ°æ‰€æœ‰è¿æ¥`closed`å’ŒçŠ¶æ€æ˜¾ç¤ºæ‰€æœ‰åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ DNS è€Œä¸æ˜¯ä»»ä½• TLS è¿æ¥ã€‚ ï¼ˆæ‰“å¼€å¹¶ä½¿ç”¨ PCAPdroid çš„åº”ç”¨ç¨‹åºè¿›è¡Œæ‰«æï¼‰

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

* * *

# 

<h1 align="center"><b><i>Auto Update Pi</b></i> </h1>

-   æ‰“å¼€åä¸ºæ›´æ–°å’Œå¤åˆ¶ç²˜è´´è„šæœ¬çš„æ–° sh æ–‡ä»¶[<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/update.sh"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]


    sudo nano update.sh

-   è®¾ç½®æƒé™


    sudo chmod 700 update.sh

-   é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ‰“å¼€ cron æ–‡ä»¶`crontab -e`ï¼Œåœ¨cronæ–‡ä»¶åº•éƒ¨å¤åˆ¶ç²˜è´´ä½œä¸šå‘½ä»¤è¡Œå¹¶ä¿å­˜ã€‚


    0 3 * * WED sudo ./update.sh 2>&1 >/home/pi/updatelog

Pi ç°åœ¨å°†åœ¨æ¯å‘¨ä¸‰å‡Œæ™¨ 3 ç‚¹æ›´æ–°ã€‚æˆ–è€…ä½ å¯ä»¥å»[HTTPS://crontab.guru/](https://crontab.guru/)å¹¶è®¾ç½®è‡ªå·±çš„æ—¶é—´è¡¨ã€‚

è°ƒæ•´ Pi çš„æ—¥æœŸ/æ—¶åŒºåœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼š

    sudo dpkg-reconfigure tzdata

æˆ–æ‰‹åŠ¨è®¾ç½®

    sudo date -s "25 DEC 2012 11:14:00"

# 

<h1 align="center"><b><i>Install Log2Ram</b></i> </h1>

å¸è½½ RAM çš„æœ€æ˜¾ç€ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå¯ä»¥æ”¹å–„æ‚¨çš„**SD å¡çš„æ½œåœ¨ä½¿ç”¨å¯¿å‘½**.
æ—¥å¿—æ–‡ä»¶æ˜¯æ‚¨å®‰è£…çš„å„ç§è½¯ä»¶å†™å…¥æœ€å¤šçš„å†…å®¹ä¹‹ä¸€ã€‚
é€šè¿‡å°†æ–‡ä»¶æ¨é€åˆ° RAMï¼Œæ‚¨å¯ä»¥æ§åˆ¶å°†å®ƒä»¬å†™å…¥ SD å¡çš„é¢‘ç‡ã€‚æ‚¨ä»ç„¶å¯ä»¥è®¿é—® RAM ä¸Šçš„è¿™äº›æ–‡ä»¶ï¼Œå°±åƒå®ƒä»¬ä½äºæ‚¨çš„ SD å¡ä¸Šä¸€æ ·ã€‚

å°†æ­¤è¡Œå¤åˆ¶å¹¶ç²˜è´´åˆ°ç»ˆç«¯ä¸­ï¼š

æ‰‹åŠ¨

    wget https://git.io/log2ram -O Log2Ram-Script.sh && sudo chmod +x Log2Ram-Script.sh && sudo ./Log2Ram-Script.sh

æˆ–è€…

æ·»åŠ  repo æºï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰

    echo "deb [signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian/ bullseye main" | sudo tee /etc/apt/sources.list.d/azlux.list
    sudo wget -O /usr/share/keyrings/azlux-archive-keyring.gpg  https://azlux.fr/repo.gpg
    sudo apt update
    sudo apt install log2ram

# 

<h1 align="center"><b><i>Turn off Pi LED lights</b></i> </h1>

æˆ‘çŒœ LED çš„ç”µæºä¼šå½±å“ä¸å¿…è¦çš„ç”µåŠ›å’Œçƒ­é‡ğŸ¤·ğŸ˜…ã€‚å¦‚æœåªæ˜¯å°†å…¶ç”¨ä½œç½‘ç»œæœåŠ¡å™¨ï¼Œåˆ™æ— è®ºå¦‚ä½•éƒ½ä¸éœ€è¦å®ƒã€‚é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ‰“å¼€ cron æ–‡ä»¶`crontab -e`ï¼Œåœ¨cronæ–‡ä»¶åº•éƒ¨å¤åˆ¶ç²˜è´´ä½œä¸šå‘½ä»¤è¡Œå¹¶ä¿å­˜ã€‚

ç»¿

    @reboot echo none | sudo tee /sys/class/leds/led0/trigger

çº¢è‰²çš„

    @reboot echo none | sudo tee /sys/class/leds/led1/trigger

é‡å¯ Piã€‚

# 

<h1 align="center"><b><i>Secure your Raspberry Pi</b></i> </h1>
<p align="center">
<a href="https://gist.github.com/boseji/c9e91ff3bd0b3cfb62a5e260fe505374"><img src="https://i.imgur.com/a9JQVls.png" width=80px height=90px></a>
<p align="center">
[<a href="https://gist.github.com/boseji/c9e91ff3bd0b3cfb62a5e260fe505374"><b>click here</b></a>]

<i>ï¼ˆæˆ‘åªæ˜¯ä½¿ç”¨ Fail2Ban å¹¶æ›´æ”¹ SSH ç«¯å£ï¼‰</i>

**[â¬† è¿”å›å†…å®¹â¬†](#table-of-contents)**

* * *

<b>ä½¿è¿™äº›é¡¹ç›®æ›´å¥½çš„ä»»ä½•é—®é¢˜ã€ä¿®å¤æˆ–æç¤ºè¯·è´¡çŒ®ğŸ¤–</b>

* * *

<p align="center">
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"
<br> 
<br> 
<br> 

<p align="center">
 <img src="https://i.imgur.com/Q07E7SW.gif" width=500px height=30px>

<p align="center">
<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/stargazers"><img src="https://reporoster.com/stars/dark/trinib/AdGuard-WireGuard-Unbound-Cloudflare"></a>

<p align="center">
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"</p>

# 

## _å­˜å‚¨åº“èµ„æº_

<h5 https://www.raspberrypi.com/documentation/

[HTTPS://GitHub.com/AD guard team/AD guard home/wiki/getting-started](https://github.com/AdguardTeam/AdGuardHome/wiki/Getting-Started)

[HTTPS://developers.cloud flare.com/](https://developers.cloudflare.com/)

[HTTPS://docs.çš®-hole.net/guides/DNS/cloud flareçš„/](https://docs.pi-hole.net/guides/dns/cloudflared/)

[HTTPS://docs.çš®-hole.net/guides/DNS/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)

[HTTPS://NL net labs.å“ªé‡Œ/documentation/unbound/unbound.conf/](https://nlnetlabs.nl/documentation/unbound/unbound.conf/)

<https://dnsprivacy.org/dns_privacy_clients/>

[HTTPS://GitHub.com/æŒ‰Uçš„EP ND/pi hole-unbound](https://github.com/anudeepND/pihole-unbound)

[HTTPS://GitHub.com/ç”³é€š/unbound.conf.çš„](https://github.com/stong/unbound.conf.d)

[HTTPS://GitHub.com/NYR/wire guard-install](https://github.com/Nyr/wireguard-install)

[HTTPS://GitHub.com/é˜¿æ­£é™†ç»­/log2RAM](https://github.com/azlux/log2ram)

* * *

## _å¸¸é—®é—®é¢˜_

å¸¸è§é—®é¢˜[<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/discussions/17"><b>ç‚¹å‡»è¿™é‡Œ</b></a>]
