# ![logo](https://i.imgur.com/zqJELkl.png)

<p align="center">
 <img src="https://img.shields.io/badge/License-MIT-blue.svg">
 <img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103">
 <img src="http://ForTheBadge.com/images/badges/built-with-love.svg">
 <img src="https://img.shields.io/badge/badges-awesome-green.svg">
 <img src="https://img.shields.io/badge/Stay-Safe-red?logo=data:image/svg%2bxml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTEwIDUxMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCA1MTAgNTEwIiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnPjxnPjxwYXRoIGQ9Im0xNzQuNjEgMzAwYy0yMC41OCAwLTQwLjU2IDYuOTUtNTYuNjkgMTkuNzJsLTExMC4wOSA4NS43OTd2MTA0LjQ4M2g1My41MjlsNzYuNDcxLTY1aDEyNi44MnYtMTQ1eiIgZmlsbD0iI2ZmZGRjZSIvPjwvZz48cGF0aCBkPSJtNTAyLjE3IDI4NC43MmMwIDguOTUtMy42IDE3Ljg5LTEwLjc4IDI0LjQ2bC0xNDguNTYgMTM1LjgyaC03OC4xOHYtODVoNjguMThsMTE0LjM0LTEwMC4yMWMxMi44Mi0xMS4yMyAzMi4wNi0xMC45MiA0NC41LjczIDcgNi41NSAxMC41IDE1LjM4IDEwLjUgMjQuMnoiIGZpbGw9IiNmZmNjYmQiLz48cGF0aCBkPSJtMzMyLjgzIDM0OS42M3YxMC4zN2gtNjguMTh2LTYwaDE4LjU1YzI3LjQxIDAgNDkuNjMgMjIuMjIgNDkuNjMgNDkuNjN6IiBmaWxsPSIjZmZjY2JkIi8+PHBhdGggZD0ibTM5OS44IDc3LjN2OC4wMWMwIDIwLjY1LTguMDQgNDAuMDctMjIuNjQgNTQuNjdsLTExMi41MSAxMTIuNTF2LTIyNi42NmwzLjE4LTMuMTljMTQuNi0xNC42IDM0LjAyLTIyLjY0IDU0LjY3LTIyLjY0IDQyLjYyIDAgNzcuMyAzNC42OCA3Ny4zIDc3LjN6IiBmaWxsPSIjZDAwMDUwIi8+PHBhdGggZD0ibTI2NC42NSAyNS44M3YyMjYuNjZsLTExMi41MS0xMTIuNTFjLTE0LjYtMTQuNi0yMi42NC0zNC4wMi0yMi42NC01NC42N3YtOC4wMWMwLTQyLjYyIDM0LjY4LTc3LjMgNzcuMy03Ny4zIDIwLjY1IDAgNDAuMDYgOC4wNCA1NC42NiAyMi42NHoiIGZpbGw9IiNmZjRhNGEiLz48cGF0aCBkPSJtMjEyLjgzIDM2MC4xMnYzMGg1MS44MnYtMzB6IiBmaWxsPSIjZmZjY2JkIi8+PHBhdGggZD0ibTI2NC42NSAzNjAuMTJ2MzBoMzYuMTRsMzIuMDQtMzB6IiBmaWxsPSIjZmZiZGE5Ii8+PC9nPjwvc3ZnPg==">

</p>
 <p align="center">
     <a href="https://img.shields.io/github/stars/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=FFD700&style=for-the-badge" alt="GitHub Repo stars">
         <img src="https://img.shields.io/github/stars/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=FFD700&style=for-the-badge"></a>
     <a href="https://img.shields.io/github/forks/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=00a671&style=for-the-badge" alt="GitHub forks">
         <img src="https://img.shields.io/github/forks/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=00a671&style=for-the-badge"></a>
     <a href="https://img.shields.io/github/watchers/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=9700b2&style=for-the-badge" alt="GitHub watchers">
         <img src="https://img.shields.io/github/watchers/trinib/AdGuard-WireGuard-Unbound-Cloudflare?color=9700b2&style=for-the-badge"></a>
</p>

<p align="center">
 <img src="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/assets/images/awcu.gif" width= "700">

<h1 align="center"><b>A step by step 📜 guide for these</b> 
<h1 align="center"><b> 🅵🆁🅴🅴 network 📡 security projects to work together on a</b>
<h1 align="center"><b>𝓡 𝓐 𝓢 𝓟 𝓑 𝓔 𝓡 𝓡 𝓨 ℙ 𝕀 🥧</b></h1>

#### _<a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md"><b>AdGuard</b></a>_⫸ Adblocker für Ihre Geräte zu Hause (<a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md#how-does-adguard-home-compare-to-pi-hole"><b>_AdGuard im Vergleich zu Pi-Hole_</b></a>)

#### _<a href="https://www.wireguard.com/"><b>WireGuard</b></a>_⫸ Ein VPN-Server zu Hause, auf den von jedem externen Netzwerk aus zugegriffen werden kann (IPv4 & IPv6)

#### _<a href="https://www.nlnetlabs.nl/projects/unbound/about/"><b>Ungebunden</b></a>mit &lt;a href="<https://dnsprivacy.org/dns_privacy_daemon>_-_stubby/über_stubby/"><b>Stummelig</b></a>_⫸ Ein validierender, rekursiver, zwischenspeichernder DNS-Resolver

#### _<a href="https://www.cloudflare.com/learning/what-is-cloudflare/"><b>Wolkenflare</b></a>_⫸ Bessere Leistung und Sicherheit beim Surfen auf Websites (DoT & DoH)

* * *

# 

<h1 align="center">🧪 Speed results with <a href="https://docs.oracle.com/en-us/iaas/Content/DNS/Tasks/testingdnsusingdig.htm"><b>BIND's DNS Tool </b></a> 🧪</h1>

<b>Abfragezeit (google.com) in Millisekunden:</b>

-   Adguard-Standard-DNS-Resolver -`60-70 msec`
-   Öffentliche Cloudflare/Quad9/Google DNS-Resolver -`50-70 msec`
-   Diese Einrichtung/Konfiguration -`5-10 msec`

<details><summary><b>🎥Video Previews🎥<img src="https://media.giphy.com/media/WT5h7PgVSScLLKtMaS/giphy.gif" width=50px height=40px></b></summary>
<p>

### 【Standard-DNS von Adguard】<i>VS</i>⭐dieses Setup⭐ :

<https://user-images.githubusercontent.com/18756975/150230438-b767e86f-4e18-4791-b5fe-0813615a37a3.mp4>

### Öffentliche【cloudflare/quad9/google】DNS-Resolver:

<https://user-images.githubusercontent.com/18756975/150319049-3d8acdc9-624f-4b60-8ee2-b80227522252.mp4>

</p>
 </details>

* * *

<h4><p align="center">
⏰Last Checked : 25 Feb 2022⏰</h2>

<div align="center">

|                             Projekte                             |                           Status                           |
| :--------------------------------------------------------------: | :--------------------------------------------------------: |
|                        AdGuard-Startseite                        |                              ✅                             |
|                            Ungebunden                            |                              ✅                             |
|                            Wolkenflare                           |                              ✅                             |
|                             Stummelig                            |                              ✅                             |
|                             WireGuard                            |                              ✅                             |

</div>
<div>

# 

# Inhalt

-   <a href="https://git.io/About">Über</a><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/parrots/party-nyan.gif" width=20px height=20px>
-   <a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/discussions">Diskussionen/F.A.Q</a><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-speech-balloon.png" width=20px height=20px>
-   [Anforderungen](#requirements)
-   [Installieren des Pi-Betriebssystems](#installing-os-image-to-sdcard-)<img src="https://www.vectorlogo.zone/logos/raspberrypi/raspberrypi-icon.svg" width=20px height=20px>
    -   [Einloggen in das Pi-System \[Kopflos\]](#-logging-into-pi-system-headlessly-)
-   [Installieren von AdGuard](#adguard-install-)<img src="https://www.vectorlogo.zone/logos/adguard/adguard-icon.svg" width=20px height=20px>
    -   [Richten Sie Ihre Geräte so ein, dass sie mit Adguard funktionieren](#-set-up-your-devices-to-work-with-adguard-)
    -   [Einrichtung der AdGuard-Sperrliste](#-setting-up-adguard-blocklist-)
        -   [Mehrere URLs gleichzeitig zur Sperrliste hinzufügen/entfernen](#-addremove-multiple-urls-)
-   [Ungebunden installieren](#unbound-install-)<img src="https://www.privacyguides.org/assets/img/legacy_svg/3rd-party/unbound.svg" width=20px height=20px>
-   [Cloudflare installieren](#cloudflare-install-)<img src="https://www.vectorlogo.zone/logos/cloudflare/cloudflare-icon.svg" width=20px height=20px>
    -   [Installieren Sie Cloudflare (DoH)](#-install-cloudflare-on-pi-with-doh-)
    -   [Cloudflare on Unbound (DoT) konfigurieren](#-configure-cloudflare-on-unbound-with-dot-)
    -   [Stubby konfigurieren (TLS-Weiterleitung)](#-configure-stubby-for-unbound-)
    -   [Konfigurieren Sie AdGuard mit Cloudflare (DoH&DoT)](#-configure-adguard-with-cloudflaredohdot-)
-   [WireGuard installieren](#wireguard-install-)<img src="https://www.vectorlogo.zone/logos/wireguard/wireguard-icon.svg" width=20px height=20px>oder<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/OpenVPN-Setup.md">OpenVPN (langsamer)</a><img src="https://i.imgur.com/Agstbe5.png" width=20px height=20px>
    -   [Verbinden mit dem VPN zum Android/IOS-Telefon](#-connecting-to-the-vpn-to-androidios-phone-)
    -   [Verbinden mit dem VPN von einem PC (Windows)](#-connecting-to-the-vpn-from-a-pc-windows-)
    -   [Konfigurieren Sie Wireguard mit AdGuard/Unbound/Cloudflare](#-configure-wireguard-with-adguardunboundcloudflare-)
        -   [Verkehr begrenzen](#limit-traffic)
        -   [IPv6-Setup](#ipv6)
-   <a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/main/Disable-All-IPv6.md">Deaktivieren Sie alle IPv6</a>
-   [Test Vpn](#how-do-you-know-if-wireguard-vpn-is-really-working-)<img src="https://i.imgur.com/6Yf8Zra.png" width=20px height=20px>
-   [Aktualisieren Sie Ihren Pi automatisch](#auto-update-pi-)
-   [Verbesserung der potenziellen Lebensdauer Ihrer SD-Karte](#log2ram-install-)
-   [Schalten Sie die Pi-LEDs aus](#turn-off-pi-led-lights-)
-   [Sicherung Ihres Raspberry Pi](#secure-your-raspberry-pi-)
-   [Repository-Ressourcen](#repository-resources)<img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-books.png" width=20px height=20px>

# 

# Anforderungen

-   Eine Raspberry Pi 3 oder 4 Version
-   Ein Router, der die Portweiterleitung unterstützt (die meisten können)
-   MicroSD-USB-Kartenleser
-   MicroSD-Karte (8 GB oder größer, mindestens Klasse 4)
-   Ethernet Kabel
-   (Optional bei Verwendung eines Monitors) MicroHDMI-(RPi 4) oder HDMI-(RPi 3)

    # 

    <p align="center">
      <b><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px> STEP 1 <img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px></b>

<h1 align="center"><b><i>Installing OS Image To SDcard</b></i> </h1>

Dieses Tutorial basiert auf Raspberry Pi OS, aber Sie können jedes Linux verwenden<a href="https://github.com/thibmaek/awesome-raspberry-pi#os-images"><b>Betriebssystem</b></a>(32bit oder 64bit) und Hardware, die Sie bevorzugen, mit einigen Anpassungen_**wenn du weißt was du tust**_! (Raspberry Pi OS ist am einfachsten und wird für Pi oder für erfahrenere Benutzer empfohlen,_DietPi-Betriebssystem_wird auch empfohlen).

Raspberry Pi OS gibt es in Desktop- und Lite-Versionen (verwenden Sie Lite nur für den Headless-Modus). Sie können Raspberry Pi mit einem Monitor/einer Tastatur/Maus oder „kopflos“ von einem Terminal aus einrichten.

Installieren Sie balenEtcher und laden Sie das Pi-Image herunter, um es auf die microSD-Karte zu schreiben.

-   Laden Sie das Raspberry Pi-Betriebssystem herunter:<https://www.raspberrypi.org/software/operating-systems/>

-   WhaleEtcher herunterladen:<https://www.balena.io/etcher/>

Nachdem Sie haben`Etcher`installiert und`Raspberry Pi OS`Datei auf Ihren Computer heruntergeladen haben, können Sie jetzt die SD-Karte mit microSD-USB-Kartenleser in Ihren Computer einlegen.

Starten Sie Etcher und wählen Sie das heruntergeladene Raspberry Pi OS-Image aus, wählen Sie Ihre microSD-Karte aus und klicken Sie auf „Flash“.

<p align="center">
 <img src="https://i.imgur.com/tbB3VIK.jpg">

Nachdem das Flashen abgeschlossen ist, suchen Sie in „Dieser PC“ nach einem Datenträgernamen „Boot- oder USB-Laufwerk“ (stecken Sie den USB-Kartenleser wieder ein, falls nicht sichtbar). Gehen Sie zu diesem Datenträger, erstellen Sie eine neue Textdatei mit dem Namen**_`ssh without 'txt' extention`_**. ACHTUNG, es ist nicht „ssh.txt“, es ist „ssh“ ohne die Erweiterung. Sie müssen die Option „Erweiterungen für bekannte Dateitypen ausblenden“ in den Datei-Explorer-Optionen deaktivieren, wenn Sie sie nicht sehen.

<p align="center">
 <img src="https://i.imgur.com/eV6uMbz.jpg">

Stecken Sie nun die SD-Karte in den Raspberry Pi, stecken Sie Ihr Ethernet-Kabel ein und booten Sie.

## ╸ Einloggen in das Pi-System[Kopflos]╸

-   Jetzt müssen Sie eine Minute warten, bis pi zum ersten Mal hochgefahren ist

-   Öffnen Sie den Browser und melden Sie sich auf der Panel-Seite Ihres Routers an

-   Finden Sie eine Liste aller Geräte, die mit Ihrem Netzwerk verbunden sind, und kopieren Sie die IP-Adresse des Raspberry Pi (es wird höchstwahrscheinlich den Hostnamen`raspberrypi`)

-   Öffnen Sie das Terminal auf Ihrem Hostcomputer. Sie können PowerShell unter Windows oder RaspController für Android verwenden

Geben Sie den folgenden Befehl ein:

    ssh pi@pi's ip address

Sie können die rechte Maustaste verwenden, um Text in Windows PowerShell einzufügen.

Geben Sie „Ja“ für die Fingerabdruckfrage und „Himbeere“ für ein Passwort ein. Die Passwörter sind bei der Eingabe in der Linux-Oberfläche unsichtbar. Du kannst Tippen**_`sudo passwd pi`_**Passwort zu ändern.

<p align="center">
 <img src="https://i.imgur.com/Wf30jxG.jpg">

Im Terminal ausführen:

    sudo apt update -y && sudo apt upgrade -y

__WARTEN SIE, DASS DAS UPDATE ABGESCHLOSSEN IST, und STARTEN SIE PI NEU. DANN WEITER ZUM NÄCHSTEN SCHRITT__.....

    sudo reboot

**[⬆ NACH OBEN ⬆](#contents)**

# 

<p align="center">
 <b><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px> STEP 2 <img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px></b>

<h1 align="center"><b><i>AdGuard Install</b></i> </h1>

Dieses Installationsskript stammt von<a href="https://github.com/AdguardTeam/AdGuardHome/blob/master/README.md"><b>AdGuard-Startseite</b></a>Hauptprojekt. Folgen Sie, um auf dem Laufenden zu bleiben.

Führen Sie den folgenden Befehl in Ihrem Terminal aus:

    curl -s -S -L https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v

-   Wenn die Installation abgeschlossen ist, erscheint ein Fenster im Terminal, das die verschiedenen Links zu IHRER Adguard-Homepage anzeigt (Erste Schritte).

-   `IMPORTANT:`Wählen Sie in Listen Interfaces die Option`Eth0`und wählen Sie weiter

<p align="center">
  <img src="https://i.imgur.com/Wa00lDp.jpg" width=580px height=690px>

-   Benutzername und Passwort einrichten

-   Sie sollten sich jetzt im Adguard-Startbereich befinden

-   `IMPORTANT:`Stellen Sie in den allgemeinen Einstellungen "Aufbewahrung von Abfrageprotokollen" auf ein`24 hours`(Ich habe gelesen, dass sich für einige Leute Protokolle füllen und pi verlangsamen und jedes Mal neu gestartet werden müssen.)

## ╸ Richten Sie Ihre Geräte so ein, dass sie mit Adguard funktionieren ╸

-   Gehen Sie für Android/Apple zu den erweiterten WLAN-Einstellungen und wählen Sie die statische Option. Im`DNS 1`Geben Sie in das Feld "pi's ip" ein

    <p align="center">
     <img src="https://i.imgur.com/nxpiqDw.jpg" width=450px height=580px>

-   Für PC/Windows

    -   <i>IPV4</i>

        Gehen Sie zu Netzwerkeinstellungen / Adapteroptionen ändern und klicken Sie mit der rechten Maustaste auf Eigenschaften und wählen Sie dann "Internetprotokoll Version 4 (TCP/IPv4)". Geben Sie die IP-Adresse von pi ein`Preferred DNS`server

    -   <i>IPV6 (benötigt für`DoH`&`DoT`um später in der Anleitung zu arbeiten, wenn Sie IPv6 auf Ihrem Router verwenden)</i>

        Gehen Sie zu "Internetprotokoll Version 6 (TCP/IPv6)" und geben Sie es ein`::1`

`OPTIONAL:`<i>Sie können in den alternativen Feldern eine Sicherungs-DNS hinzufügen</i>

`BE AWARE:`<i>Unter Android unterbricht das Hinzufügen eines öffentlichen DNS im zweiten Feld die Adblockierung von Adguard</i>

<p align="center">
 <img src="https://i.imgur.com/8gsDk3z.jpg">

## ╸ AdGuard-Blocklist einrichten ╸

Wählen Sie auf der AdGuard-Startseite unter Filtern den Abschnitt DNS-Sperrliste zum Hinzufügen von URLs aus.

<p align="center">
 <img src="https://i.imgur.com/shrtJLD.png">

Sie können Google nach verschiedenen Sperrlisten durchsuchen. Hier ist mein Brauch<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/My-Blocklist.txt"><b>Blockliste</b></a>mit meinen URLs oder bauen Sie daraus Ihre eigenen auf<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/main/%F0%9F%A7%B1Blocklist-Sources%E2%84%B9%EF%B8%8F"><b>Quellen</b></a>.

`IMPORTANT:`Einige Sperrlisten können einige wichtige Inhalte oder Websites blockieren. Um die Blockierung aufzuheben, gehen Sie zum Abschnitt "Abfrageprotokoll" und sehen Sie_entsperren_Option, wenn der Mauszeiger über eine Abfrage bewegt wird, um nicht blockierte Websites in das Beispiel "Benutzerdefinierte Filterregeln" zu setzen:`@@||bitly.com^$important`. Suchen Sie nach Client-IP und Uhrzeit.

<p align="center">
 <img src="https://i.imgur.com/1gZibwD.png">

## ╸ Mehrere URLs hinzufügen/entfernen ╸

Sie können vorerst nur eine URL nach der anderen in der DNS-Blocklist in Adguard hinzufügen, aber es gibt ein Python-Skript, um mehrere URLs zusammen hinzuzufügen.

Öffnen Sie eine neue Py-Datei (bulkurls.py):

    nano bulkurls.py

Kopieren Sie dann den Text und fügen Sie ihn ein<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/bulkurls.py"><b>bulkurls.py</b></a>Datei und speichern (Strg+x dann y dann enter)**SIE MÜSSEN IHRE ADGUARD-ANMELDEDATEN IN DER DATEI KONFIGURIEREN**.

_Bei Verwendung**DiätPi**Installieren`sudo apt-get install python3-pip -y && pip install requests`weil es nicht standardmäßig installiert ist._

Laufen :`sudo python3 bulkurls.py`

Zu**Löschen**du musst dich ändern`add`in<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/62ba01ed8ed3a5bc5294b9fe7ee38c3e83ae1b86/bulkurls.py#L150"><b>zweite der letzten Zeile</b></a>zu`remove`in der Datei bulkurls.py.

Gehe zu<https://d3ward.github.io/toolz/adblock.html>um zu testen, ob Anzeigen blockiert werden<img src="https://i.imgur.com/Q5oO9EY.png" width=100px height=80px>

**[⬆ NACH OBEN ⬆](#contents)**

# 

<p align="center">
 <b><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px> STEP 3 <img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px></b>

<h1 align="center"><b><i>Unbound Install</b></i> </h1>

Führen Sie den folgenden Befehl in Ihrem Terminal aus:

    sudo apt install unbound -y

Um einen Host rekursiv abzufragen, der nicht als Adresse zwischengespeichert ist, muss der Resolver ganz oben in der Serverstruktur beginnen und die Root-Server abfragen, um zu wissen, wo er nach der Top-Level-Domain für die abgefragte Adresse suchen muss. Unbound kommt mit standardmäßig eingebauten Hinweisen.

    wget -O root.hints https://www.internic.net/domain/named.root && sudo mv root.hints /var/lib/unbound/

`IMPORTANT:`Diese muss alle 6 Monate aktualisiert werden. Zu_**Auto-Update**_root.hints alle 6 Monate müssen Sie einen Cronjob erstellen.

Geben Sie in der Befehlszeile ein`crontab -e`, es wird gefragt Wählen Sie einen Editor (wählen Sie 1) und fügen Sie diese Zeilen am unteren Rand von crontab ein und speichern Sie (Strg + x, dann y, dann Eingabe):

    1 0 1 */6 * wget -O root.hints https://www.internic.net/domain/named.root
    2 0 1 */6 * sudo mv root.hints /var/lib/unbound/

_Bei Verwendung**DiätPi**Sie müssen resolvconf installieren und unbound-resolvconf.service neu starten, um den ungebundenen Nameserver auf 127.0.0.1 zu setzen:_

    sudo apt-get install resolvconf -y && sudo systemctl restart unbound-resolvconf.service

<p align="center">
 <img src="https://i.imgur.com/26ro62t.jpg">

**[⬆ NACH OBEN ⬆](#contents)**

# 

<p align="center">
 <b><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px> STEP 4 <img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px></b>   

<h1 align="center"><b><i>Cloudflare Install</b></i> </h1>

## ╸ Installieren Sie Cloudflare auf Pi mit`(DoH)`╸

Installieren Sie Cloudflare mit DNS über HTTPS (DoH), folgen Sie diesen 👉<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Cloudflare-DoH-Setup.md"><b>ANWEISUNGEN</b></a>👈.

## ╸ Konfigurieren Sie Cloudflare On Unbound With`(DoT)`╸

Erstellen Sie eine ungebundene Konfigurationsdatei, indem Sie an der Eingabeaufforderung Folgendes eingeben:

    sudo nano /etc/unbound/unbound.conf.d/unbound.conf

Kopieren Sie den gesamten Text und fügen Sie ihn ein<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/unbound.conf"><b>unbound.conf</b></a>Datei und speichern (Strg+x dann y dann enter).

## ╸ Stubby für ungebunden konfigurieren ╸

Verwenden Sie Unbound für das Caching und Stubby für die TLS-Weiterleitung. Stubi installieren:

    sudo apt install stubby -y

Entfernen Sie die Datei stubby.yaml, erstellen Sie sie neu und kopieren Sie den gesamten Text aus der Datei und fügen Sie ihn ein<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/stubby.yml"><b>👉 diese Stummelkonfiguration 👈</b></a>und speichern. (`cd $h`um zum Home-Ordner zurückzukehren, wenn Sie fertig sind).

    cd /etc/stubby/ && sudo rm stubby.yml && sudo nano stubby.yml

-   Starten Sie Unbound & Stubby neu und prüfen Sie den Status:


    sudo systemctl restart unbound stubby ; systemctl status unbound stubby -l

<p align="center">
 <img src="https://i.imgur.com/7zIpWP2.jpg" width=650px height=370px>

## ╸ Konfigurieren Sie Adguard mit`Cloudflare(DoH&DoT)`╸

-   Wählen Sie auf der AdGuard-Startseite unter Einstellungen "Dns-Einstellungen"

-   Löschen Sie alles aus den Serveroptionen „Upstream“ und „Bootstrap DNS“ und:

    -   Zum`DNS over TLS(DoT)`addieren`127.0.0.1:53`sowohl in den Serverfeldern „Upstream“ als auch „Bootstrap DNS“.
    -   Zum`DNS over HTTPS(DoH)`addieren`127.0.0.1:5053`sowohl in den Serverfeldern „Upstream“ als auch „Bootstrap DNS“.
    -   Zum`TLS forwarder(stubby)`addieren`127.0.0.1:8053`sowohl in den Serverfeldern „Upstream“ als auch „Bootstrap DNS“.

-   `IMPORTANT:`Sie müssen überprüfen "<a href="https://adguard.com/en/blog/in-depth-review-adguard-home.html#dns"><b>Parallelanfrage</b></a>"Option für DNS-Resolver, um gleichzeitig zu arbeiten.

<b>Klicken Sie auf Anwenden und testen Sie die Upstreams</b>(Möglicherweise wird nur beim ersten Test ein Fehler angezeigt).

<p align="center">
 <img src="https://i.imgur.com/Ug4Euou.jpg" width=650px height=370px>

-   Suchen Sie dann in den DNS-Einstellungen nach dem Abschnitt DNS-Cache-Konfiguration und stellen Sie die Cache-Größe auf ein`0`(Caching wird bereits vom Unbound gehandhabt) und klicken Sie auf Apply.

<p align="center">
 <img src="https://i.imgur.com/8Q5Zb0M.jpg" width=650px height=370px>

### `IMPORTANT:`Windows-System- und Android-Browser müssen etwas angepasst werden`stabilize`DNS-Resolver..Linux funktioniert gut<i>(getestet auf Minze)</i>

### Windows

-   Installieren<a href="https://mayakron.altervista.org/support/acrylic/Home.htm"><b>Acryl-DNS-Proxy</b></a>

-   Gehe zu`C:\Program Files (x86)\Acrylic DNS Proxy`und offen`AcrylicConfiguration.ini`Datei. Löschen Sie alles und kopieren Sie diese<a href="https://raw.githubusercontent.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/main/AcrylicConfiguration.ini"><b>👉EINSTELLUNGEN👈</b></a>nur ändern_**PrimaryServerAdres**_an die adresse deines pi.

-   Im selben Ordner ausführen`RestartAcrylicService.bat`&`PurgeAcrylicCacheData.bat`

    `TIP:`Fehlerbehebung bei IP/DNS-Befehlen

        ipconfig /release
        ipconfig /renew
        ipconfig /flushdns

### Android

-   Wenden Sie sich in jedem Browser, den Sie verwenden, an**aus**`Use Secure DNS`option.
-   Seien Sie sich bewusst, dass Konflikte mit benutzerdefinierten gerooteten Roms und Kernels mit build.prop-DNS-Optimierungen oder Apps/Magisk-Modulen auftreten können.

#### _Das ist es_. Gehen Sie jetzt zu<https://1.1.1.1/help>im Browser und Sie sollten sehen, dass diese Optionen "Ja" ausgeben.

-   [x] Verbunden mit 1.1.1.1
-   [x] DNS über HTTPS (DoH)
-   [x] DNS über TLS (DoT)
-   [ ] DNS über WARP
    <p align="center">
     <img src="https://i.imgur.com/2S3IH5H.jpg" width=650px height=370px>

#### Andere Websites, um die Sicherheit zu überprüfen

<https://browserleaks.com/dns>- sollte alle mit "Cloudflare" verbundenen anzeigen

<https://www.cloudflare.com/ssl/encrypted-sni/>- "Sicheres DNS / DNSSEC / TLS 1.3" sollte alles ein grünes Häkchen sein

<https://dnssec.vs.uni-due.de/>- sollte "Ja, Ihr DNS-Resolver validiert DNSSEC-Signaturen" sagen

**[⬆ NACH OBEN ⬆](#contents)**

# 

<p align="center">
 <b><img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px> STEP 5 <img src="https://github.com/seanprashad/slackmoji/blob/master/emoji/party/party-footprints.png" width=20px height=20px></b>

<h1 align="center"><b><i>WireGuard Install</b></i> </h1>

**Vor der Installation von WireGuard**, wenn Sie keine statische IP haben, müssen Sie eine kostenlose bekommen`Dynamic DNS Subdomain`Andernfalls ändert sich Ihre externe IP-Adresse höchstwahrscheinlich von Zeit zu Zeit dynamisch von Ihrem ISP, und aus diesem Grund müssen Sie einen dynamischen DNS-Dienst einrichten. 👉👉**_▓▒░Verwenden Sie dies<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Dns-Service-Guide.md"><b>ANLEITUNG HIER</b></a>░▒▓_**👈👈. Oder überspringen Sie den Schritt.

Wir müssen auch eine Portweiterleitung auf Ihrem Router einrichten, damit wir außerhalb unseres Netzwerks auf Wireguard zugreifen können, z. B. in einem Hotspot eines Cafés oder auf Ihre mobilen Daten
TYP | WERT  
------------ \| -------------
Gerät | Hostname oder IP des Raspberry Pi
Protokoll | UDP
Portbereich | 51820-51820
Ausgehender Port | 51820
Internetzugang zulassen (falls vorhanden) | Jawohl

Meine 👇Router👇 Porteinstellung. Deins ist vielleicht anders, aber du wirst es verstehen. Denken Sie daran, Google 🔍Suchmaschine🔎 ist Ihr Freund. Wenn Sie keine Verbindung von einem externen Netzwerk herstellen können, was bedeutet, dass der ISP ausgehende Verbindungen blockiert hat, können Sie sie anrufen und freundlich darum bitten, dass es funktioniert.

<p align="center">
 <img src="https://i.imgur.com/9LBEk1i.jpg">

* * *

👊GROSSEN DANK👊 für dieses Installationsskript von<a href="https://github.com/Nyr/wireguard-install"><b>Nyr</b></a>. Folgen Sie, um auf dem Laufenden zu bleiben.

Im Terminal ausführen

    wget https://git.io/wireguard -O wireguard-install.sh && sudo bash wireguard-install.sh

-   Das Skript fragt Sie nach der öffentlichen IPv4/dem Hostnamen für das VPN._Wenn_Sie haben eine statische IP-Adresse, fahren Sie fort oder geben Sie die dynamische DNS-Domäne ein, die Sie aus der erstellt haben<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/Dns-Service-Guide.md"><b>Anweisungen</b></a>. Zum Beispiel: trinibvpn.freeddns.org

-   Für Port-Option`press enter`für Standard 51820. Geben Sie als Client-Namen einfach einen beliebigen Namen ein und verwenden Sie für DNS Option 3 (`1.1.1.1`) zur Zeit. Wir werden konfigurieren`adguard/unbound/cloudflare`mit dem vpn nachdem es fertig installiert ist

<p align="center">
 <img src="https://i.imgur.com/WUNZIK4.jpg">

-   Warten Sie, bis die Installation abgeschlossen ist und der QR-Code angezeigt wird, nicht schließen. Aber wenn doch, zu`regenerate qrcode`, im Terminal eingeben, aber nur den Namen ersetzen`yourclientname.conf`Datei zu Ihnen:


    sudo cp /root/yourclientname.conf /home/pi && sudo qrencode -t ansiutf8 < yourclientname.conf

`IMPORTANT:`Sie müssen für jedes Gerät, das Sie mit dem VPN verwenden, einen neuen Benutzer/Client hinzufügen. Um einen neuen Benutzer hinzuzufügen, führen Sie einfach das Skript erneut aus und erstellen Sie einen Benutzer mit einem anderen Clientnamen.

## Wenn Sie verwenden möchten_OpenVPN_Anweisungen sind<a href="https://github.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/blob/main/OpenVPN-Setup.md"><b>👉hier👈</b></a>

# 

### ╸ VPN mit Android/IOS-Telefon verbinden ╸

Installieren Sie die WireGuard-App von Google Play oder dem App Store

Wireguard (Google Play):<https://play.google.com/store/apps/details?id=com.wireguard.android>

Wireguard (App Store):<https://apps.apple.com/us/app/wireguard/id1441195209>

Sie müssen den im Terminal angezeigten QR-Code mit der Wireguard-App scannen und auswählen`+ button`und nutzen Sie die Möglichkeit`Scan from QR code`Konfiguration zu installieren.

`IMPORTANT`: Aktivieren**Kernel-Modul-Backend**in den Einstellungen

<p align="left">
 <img src="https://i.imgur.com/R4qbiOQ.jpg" width=250px height=350px>

### ╸ Verbinden mit dem VPN von einem PC (Windows) ╸

WireGuard for windows:<https://download.wireguard.com/windows-client/wireguard-installer.exe>

-   Ein ... kreieren`new text document`mit einem beliebigen Namen auf dem PC kopieren und den Text aus der Wireguard-Client-Konfigurationsdatei einfügen.

-   Um Text in der Client-Konfigurationsdatei anzuzeigen, geben Sie Terminal ein:


    sudo cat /root/yourclientname.conf

-   Markieren Sie den gesamten Text, kopieren Sie ihn und fügen Sie ihn in die TXT-Datei auf dem PC ein und speichern Sie ihn. Benennen Sie dann die Erweiterung um von`txt`zu`conf`. Jetzt haben Sie eine Konfigurationsdatei für diesen Wireguard-Client.

-   Sie können nun die Konfigurationsdatei in Wireguard importieren (Option Import aus Datei).

## ╸ WireGuard konfigurieren mit`Adguard/Unbound/Cloudflare`╸

_Denken Sie daran, dass dies gilt, wenn Sie in einem externen Netzwerk oder zu Hause rund um die Uhr mit WireGuard VPN verbunden sind, da Sie AdGuard/Unbound/Cloudflare bereits manuell eingerichtet haben und auf Ihren Geräten ausführen._(kein Problem, beide nach meiner Erfahrung eingerichtet zu haben).

-   Wählen Sie in der Wireguard-App Ihren Tunnel aus und wählen Sie Bearbeiten (Stift oben rechts)

-   Unter DNS-Server eintragen`pi's ip`und speichern (IPv4 & IPv6)

<p align="center">
 <img src="https://i.imgur.com/UC0vWfE.jpg" width=450px height=500px>  

### Verkehr begrenzen

Mit WireGuard verlieren Sie etwa 50 % der Internetgeschwindigkeit, da der Prozess des Tunnelns durch pi zum Router zu den Geräten\*\*

Löschen Sie die Option "0.0.0.0/0, ::/0" für zulässige IPs, da sie den gesamten Datenverkehr an Ihr Heimnetzwerk weiterleitet, was langsam sein wird. Sie müssen Datenverkehr nur über Ihre Adressen senden.

-   Zuerst müssen Sie es durch Ihr Netzwerk-Gateway ersetzen, aber die letzte Zahl auf eine Null und setzen<a href="https://www.google.com/search?q=prefix+length+explained&client=firefox-b-d&sxsrf=ALeKk036Jc9vJl73zVXf0yyZs5UlKRlNRQ%3A1621083125589&ei=9cOfYI66I5-qwbkPkdWxkAk&oq=prefix+length+explained&gs_lcp=Cgdnd3Mtd2l6EAMyBggAEAcQHjoHCCMQsAMQJzoHCAAQRxCwA1CUJ1iUJ2CiKmgBcAJ4AIABsAGIAdQCkgEDMC4ymAEAoAEBqgEHZ3dzLXdpesgBCcABAQ&sclient=gws-wiz&ved=0ahUKEwjOiOie3cvwAhUfVTABHZFqDJIQ4dUDCA0&uact=5"><b>Präfixlänge</b></a>bis 24. Zum Beispiel:`192.168.1.1/24`zu`192.168.1.0/24`oder wie mein ISP-Router`192.168.100.1/24`zu`192.168.100.0/24`.~~**Jetzt verliere ich nur noch 25% Geschwindigkeit**😁 (ps. mit 5g-Netzwerk)~~

`UPDATE:`Nach einem Wireguard-Update bekomme ich dabei keine schnellere Geschwindigkeit :( .. aber es macht immer noch Sinn_nicht_benutzen`"0.0.0.0/0, ::/0`mit WLAN. Wenn jemand irgendwelche Tweaks kennt, um einen Schub zu bekommen, lass es mich wissen.

<p align="center">
 <img src="https://i.imgur.com/x4m6Pbl.jpg" width=450px height=500px>

### BITTE LESEN SIE !! , SEI VORSICHTIG !!

`IMPORTANT`:_Wenn Ihr Netzwerk IP-Adressen für Geräte hat, die mit einer dreistelligen Zahl (mehr als 24) enden, zum Beispiel: 192.168.100.`999`, können Sie von einem externen Netzwerk nicht richtig routen, da die Anwendung von 24 nur die Nummern 1 bis 24 zulässt. Sie müssen stattdessen put`0`um aus dem 24er-Bereich zu routen, zum Beispiel:`192.168.100.0/0`_.

Oder Sie können den IP-Bereich auf Ihrem Router ändern (meiner Erfahrung nach erhalten Sie möglicherweise etwas bessere Geschwindigkeiten, da unnötige zulässige IP-Adressen nicht über den 24-Bereich geleitet werden).

<p align="center">
 <img src="https://i.imgur.com/ZZ4aMUI.jpg" width=750px height=550px>

## IPV6

Wenn Sie IPv6 verwenden, müssen Sie bei einer WLAN-Verbindung in WireGuard zugelassene IPs eingeben`fe80::1/0`auch. Zum Beispiel`192.168.100.0/0, fe80::1/0`

Wenn Sie auf einem Windows-PC mit einem Ethernet-Kabel verbunden sind, müssen Sie eingeben`::1`in IPv6-Adresse in "Internet Protocol Version 6(TCP/IPv6)" bevorzugter DNS-Server.

Dann geh zu<https://ipv6leak.com/>und du solltest sehen "_Ihr IPv6 ist nicht undicht_".

# 

<h1 align="left"><a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/blob/main/Disable-All-IPv6.md"><b>Disable all IPv6</b></a></h2>

# 

## Woher wissen Sie, ob Wireguard VPN wirklich funktioniert?

Zum**windows**herunterladen<a href="https://www.wireshark.org/#download."><b>Wireshark</b></a>

Nach dem Herunterladen können Sie die Anwendung verwenden, um Ihre Datenpakete zu überprüfen, wobei das Protokoll auf das von Wireguard VPN verwendete eingestellt ist. Bei einem Paketverkehr handelt es sich um`encrypted`, kann zum Beispiel so gelesen werden:

<p align="center">
 <img src="https://i.imgur.com/Tn4M47R.jpg">

Zum**android**Sie können verwenden<a href="https://play.google.com/store/apps/details?id=com.emanuelef.remote_capture&hl=en&gl=US"><b>PCAPdroid</b></a>. Sie sollten alle Verbindungen sehen`closed`und Status, der alle DNS- und keine TLS-Verbindungen in allen Apps anzeigt (öffnen und verwenden Sie Apps für PCAPdroid zum Scannen).

**[⬆ NACH OBEN ⬆](#contents)**

* * *

# 

<h1 align="center"><b><i>Auto Update Pi</b></i> </h1>

-   Öffnen Sie eine neue sh-Datei mit dem Namen update und kopieren Sie den Text aus<a href="https://raw.githubusercontent.com/trinib/Adguard-Wireguard-Unbound-Cloudflare/main/update.sh"><b>👉hier👈</b></a>


    sudo nano update.sh

-   Berechtigung festlegen


    sudo chmod 700 update.sh

-   Öffnen Sie die Cron-Datei, indem Sie sie in die Befehlszeile eingeben`crontab -e`, kopieren Sie die Auftragsbefehlszeile unten am Ende der Cron-Datei und speichern Sie sie.


    0 3 * * WED sudo ./update.sh 2>&1 >/home/pi/updatelog

Pi wird jetzt jeden Mittwoch um 3 Uhr morgens aktualisiert. Oder Sie können zu gehen<https://crontab.guru/>und legen Sie Ihren eigenen Zeitplan fest.

Passen Sie das Datum/die Zeitzone von pi an, geben Sie im Terminal ein:

    sudo dpkg-reconfigure tzdata

oder manuell einstellen

    sudo date -s "25 DEC 2012 11:14:00"

# 

<h1 align="center"><b><i>Log2Ram Install</b></i> </h1>

Einer der bedeutendsten Vorteile des Offloading Ihres RAMs ist, dass es Ihren verbessert**Potenzielle Lebensdauer der SD-Karte**.
Protokolldateien gehören zu den Dingen, die von den verschiedenen Softwarekomponenten, die Sie installieren, am häufigsten geschrieben werden.
Indem Sie die Dateien in Ihren Arbeitsspeicher verschieben, können Sie steuern, wie oft sie auf die SD-Karte geschrieben werden. Sie können weiterhin auf diese Dateien im RAM zugreifen, als ob sie sich auf Ihrer SD-Karte befinden würden.

Kopieren Sie diese Zeile und fügen Sie sie im Terminal ein:

Manuell

    wget https://git.io/log2ram -O Log2Ram-Script.sh && sudo chmod +x Log2Ram-Script.sh && sudo ./Log2Ram-Script.sh

oder

Repo-Quelle hinzufügen (automatische Aktualisierung)

    echo "deb [signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian/ bullseye main" | sudo tee /etc/apt/sources.list.d/azlux.list
    sudo wget -O /usr/share/keyrings/azlux-archive-keyring.gpg  https://azlux.fr/repo.gpg
    sudo apt update
    sudo apt install log2ram

# 

<h1 align="center"><b><i>Turn Off Pi LED Lights</b></i> </h1>

Ich denke, die Stromversorgung von LEDs wirkt sich auf unnötigen Strom und Wärme aus 🤷😅. Es ist sowieso nicht erforderlich, wenn Sie es nur als Netzwerkserver verwenden. Öffnen Sie die Cron-Datei, indem Sie sie in die Befehlszeile eingeben`crontab -e`, kopieren Sie die Auftragsbefehlszeile unten am Ende der Cron-Datei und speichern Sie sie.

Grün

    @reboot echo none | sudo tee /sys/class/leds/led0/trigger

rot

    @reboot echo none | sudo tee /sys/class/leds/led1/trigger

Pi neustarten.

# 

<h1 align="center"><b><i>Secure Your Raspberry Pi</b></i> </h1>
<p align="center">
<a href="https://gist.github.com/boseji/c9e91ff3bd0b3cfb62a5e260fe505374"><img src="https://i.imgur.com/a9JQVls.png" width=80px height=90px></a>
<p align="center">
<a href="https://gist.github.com/boseji/c9e91ff3bd0b3cfb62a5e260fe505374"><b>LINK</b></a>

<i>(Ich benutze nur Fail2Ban und ändere den SSH-Port)</i>

**[⬆ NACH OBEN ⬆](#contents)**

* * *

<p align="center">
<b>🎉🎉 THAT'S IT !! 🎉🎉 YOUR FINISH 👌👌
<p align="center">
<b>ANY ISSUES, FIXES OR TIPS TO MAKE THESE PROJECTS BETTER PLEASE CONTRIBUTE🤖</b>

* * *

<p align="center">
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"
<br> 
<br> 
<br> 

<p align="center">
 <img src="https://i.imgur.com/Q07E7SW.gif" width=500px height=30px>

<p align="center">
<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/stargazers"><img src="https://reporoster.com/stars/dark/trinib/AdGuard-WireGuard-Unbound-Cloudflare"></a>

<p align="center">
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif" </p>

# 

## _Repository-Ressourcen_

<h5 https://www.raspberrypi.com/documentation/

<https://github.com/AdguardTeam/AdGuardHome/wiki/Getting-Started>

<https://developers.cloudflare.com/>

<https://docs.pi-hole.net/guides/dns/cloudflared/>

<https://docs.pi-hole.net/guides/dns/unbound/>

<https://nlnetlabs.nl/documentation/unbound/unbound.conf/>

<https://dnsprivacy.org/dns_privacy_clients/>

<https://github.com/anudeepND/pihole-unbound>

<https://github.com/stong/unbound.conf.d>

<https://github.com/Nyr/wireguard-install>

<https://github.com/azlux/log2ram>

* * *

<h4

Häufig gestellte Fragen:<a href="https://github.com/trinib/AdGuard-WireGuard-Unbound-Cloudflare/discussions/17"><b>VERKNÜPFUNG</b></a>
